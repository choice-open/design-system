{
  "slug": "utilities/bezier-curve-editor",
  "title": "BezierCurveEditor",
  "package": {
    "name": "@choice-ui/bezier-curve-editor",
    "version": "0.0.4",
    "description": "An interactive Bezier curve editor component for customizing animation easing functions",
    "dependencies": {
      "usehooks-ts": "^3.1.0",
      "@choice-ui/shared": "workspace:*"
    },
    "peerDependencies": {
      "react": ">=18.0.0",
      "react-dom": ">=18.0.0"
    }
  },
  "exports": [
    "type BezierCurveValueType",
    "type BezierCurveExpandedValueType",
    "type BezierCurveType",
    "type Point",
    "bezierCurveParamsFromSizeAndValue",
    "BEZIER_CURVE_EDITOR_DEFAULTS",
    "PRESET_EASINGS",
    "PREVIEW_KEYFRAMES",
    "BezierCurveEditor",
    "type BezierCurveEditorProps",
    "LinearGradient"
  ],
  "props": [
    {
      "displayName": "PREVIEW_KEYFRAMES",
      "description": "",
      "props": []
    },
    {
      "displayName": "BezierCurveEditorProps",
      "description": "",
      "props": [
        {
          "name": "className",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "delay",
          "type": "number | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "disabledPoints",
          "type": "[boolean, boolean] | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "duration",
          "type": "number | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "enablePreview",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "handleSize",
          "type": "number | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "outerAreaSize",
          "type": "number | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "showPlane",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "size",
          "type": "number | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "strokeWidth",
          "type": "number | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "allowNodeEditing",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onChange",
          "type": "((value: BezierCurveExpandedValueType) => void) | ((value: BezierCurveValueType) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "value",
          "type": "BezierCurveExpandedValueType | BezierCurveValueType | undefined",
          "required": false,
          "description": ""
        }
      ]
    },
    {
      "displayName": "LinearGradient",
      "description": "",
      "props": [
        {
          "name": "endColor",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "mainColor",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "startColor",
          "type": "string | undefined",
          "required": false,
          "description": ""
        }
      ]
    }
  ],
  "stories": [
    {
      "id": "utilities-beziercurveeditor--basic",
      "name": "Basic",
      "exportName": "Basic",
      "description": "To use the component in the basic way, pass an array with four numbers between 0 and 1 inclusive to the `value` prop.\nThe same format will be passed to the change handler that you provide when the value changes.\n\n_Note: If you are using TypeScript, you may need to set the `allowNodeEditing` prop to `false`_",
      "source": "import { BEZIER_CURVE_EDITOR_DEFAULTS, PREVIEW_KEYFRAMES, BezierCurveEditor } from \"@choice-ui/bezier-curve-editor\"\nimport { useState, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState<BezierCurveValueType>(\n    BEZIER_CURVE_EDITOR_DEFAULTS.defaultValue,\n  )\n\n  const delay = 0\n  const duration = 2\n\n  const previewAnimationStyle = useMemo(\n    () => ({\n      animationName: \"bezier-preview-loop\",\n      animationIterationCount: \"infinite\",\n      animationDirection: \"alternate\",\n      animationDelay: `${delay}s`,\n      animationDuration: `${duration}s`,\n      animationTimingFunction: `cubic-bezier(${value})`,\n    }),\n    [delay, duration, value],\n  )\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <style>{PREVIEW_KEYFRAMES(208 - 24 - 8).bezierLoop}</style>\n      <div className=\"flex aspect-square w-52 items-center justify-center rounded-md border\">\n        <BezierCurveEditor\n          size={96}\n          allowNodeEditing={false}\n          value={value}\n          onChange={setValue}\n          className=\"absolute\"\n        />\n      </div>\n      <div className=\"flex w-full items-center gap-2\">\n        <p className=\"flex-1\">Bezier</p>\n        <NumericInput\n          className=\"w-full\"\n          value={value}\n          expression=\"{v1},{v2},{v3},{v4}\"\n          onChange={(_val, detail) => {\n            setValue(detail.array.slice(0, 4) as BezierCurveValueType)\n          }}\n        />\n      </div>\n\n      <div className=\"flex flex-col gap-2\">\n        <div className=\"bg-secondary-background relative h-8 w-full rounded-lg\">\n          <div\n            className=\"absolute top-1 left-1 size-6 rounded-md bg-white shadow-xs\"\n            style={previewAnimationStyle}\n          />\n        </div>\n        <div className=\"text-default-foreground/70 flex items-center gap-2 text-xs\">\n          <span>Speed:</span>\n          <span className=\"text-blue-600\">●</span>\n          <span>Slow</span>\n          <span className=\"text-green-600\">●</span>\n          <span>Medium</span>\n          <span className=\"text-red-600\">●</span>\n          <span>Fast</span>\n        </div>\n        <div\n          className=\"h-1 w-full rounded-md\"\n          style={{\n            backgroundImage: generateSpeedGradient(value),\n          }}\n        />\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "utilities-beziercurveeditor--advanced-both-axes",
      "name": "Advanced",
      "exportName": "AdvancedBothAxes",
      "description": "To use the component in the advanced way, you must set the `allowNodeEditing` prop to `true`.\nAn array with 8 numbers between 0 and 1 inclusive will be used for the value and will be passed to your change handler.\n\n_Note: By default, all of the values are editable. Scroll down to see examples that constrain axes._",
      "source": "import { BezierCurveEditor } from \"@choice-ui/bezier-curve-editor\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState<BezierCurveExpandedValueType>([\n    0, 0, 0.5, 0.25, 0.5, 0.75, 1, 1,\n  ])\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <div className=\"flex aspect-square w-80 items-center justify-center rounded-xl border\">\n        <BezierCurveEditor\n          size={200}\n          value={value}\n          onChange={setValue}\n          allowNodeEditing\n          handleSize={12}\n          className=\"absolute\"\n        />\n      </div>\n      <div className=\"flex w-full items-center gap-2\">\n        <p className=\"flex-1\">Bezier</p>\n        <NumericInput\n          className=\"w-full\"\n          value={value}\n          expression=\"{v1},{v2},{v3},{v4},{v5},{v6},{v7},{v8}\"\n          onChange={(_val, detail) => {\n            setValue(detail.array.slice(0, 8) as BezierCurveExpandedValueType)\n          }}\n        />\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "utilities-beziercurveeditor--preset-easings",
      "name": "Preset Easings",
      "exportName": "PresetEasings",
      "description": "",
      "source": "import { BEZIER_CURVE_EDITOR_DEFAULTS, PRESET_EASINGS, PREVIEW_KEYFRAMES, BezierCurveEditor } from \"@choice-ui/bezier-curve-editor\"\nimport { useState, useCallback, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [isHovered, setIsHovered] = useState<number | null>(null)\n  const [selectedValue, setSelectedValue] = useState<{\n    name: string\n    value: BezierCurveValueType\n  }>(PRESET_EASINGS[0])\n\n  const [duration, setDuration] = useState(BEZIER_CURVE_EDITOR_DEFAULTS.duration)\n  const [delay, setDelay] = useState(BEZIER_CURVE_EDITOR_DEFAULTS.delay)\n\n  // 缓存预览动画样式\n  const previewAnimationStyle = useMemo(\n    () => ({\n      animationName: \"bezier-preview-loop\",\n      animationIterationCount: \"infinite\",\n      animationDirection: \"alternate\",\n      animationDelay: `${delay}s`,\n      animationDuration: `${duration}s`,\n      animationTimingFunction: `cubic-bezier(${selectedValue.value})`,\n    }),\n    [delay, duration, selectedValue.value],\n  )\n\n  // 缓存主要变更处理器\n  const handleValueChange = useCallback((value: BezierCurveValueType) => {\n    setSelectedValue({\n      name: `cubic-bezier(${value.map((v) => v.toFixed(2)).join(\", \")})`,\n      value,\n    })\n  }, [])\n\n  // 缓存预设项点击处理器\n  const handlePresetClick = useCallback((item: { name: string; value: BezierCurveValueType }) => {\n    setSelectedValue(item)\n  }, [])\n\n  return (\n    <div className=\"flex items-stretch gap-8\">\n      <style>{PREVIEW_KEYFRAMES(160 - 24 - 8).bezierLoop}</style>\n      <div className=\"flex flex-col gap-4\">\n        <BezierCurveEditor\n          size={128}\n          value={selectedValue.value}\n          onChange={handleValueChange}\n          outerAreaSize={0}\n          allowNodeEditing={false}\n          duration={duration}\n          delay={delay}\n        />\n        <div className=\"flex h-6 items-center\">\n          <strong\n            className={tcx(\n              PRESET_EASINGS.some((v) => v.name === selectedValue.name)\n                ? \"\"\n                : \"w-40 min-w-0 text-xs\",\n            )}\n          >\n            {selectedValue.name}\n          </strong>\n        </div>\n\n        <div className=\"flex flex-col gap-1\">\n          <span className=\"text-xs\">Preview</span>\n          <div className=\"bg-secondary-background relative h-8 w-40 rounded-lg\">\n            <div\n              className=\"absolute top-1 left-1 size-6 rounded-md bg-white shadow-xs\"\n              style={previewAnimationStyle}\n            />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-4 gap-4\">\n        {PRESET_EASINGS.map((item, index) => (\n          <PresetEasingItem\n            key={index}\n            item={item}\n            index={index}\n            isSelected={selectedValue.name === item.name}\n            isHovered={isHovered === index}\n            duration={duration}\n            delay={delay}\n            onHover={setIsHovered}\n            onClick={handlePresetClick}\n          />\n        ))}\n      </div>\n    </div>\n  )\n\n}"
    }
  ],
  "tags": [
    "beta"
  ]
}