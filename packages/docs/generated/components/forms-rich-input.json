{
  "slug": "forms/rich-input",
  "title": "RichInput",
  "package": {
    "name": "@choice-ui/rich-input",
    "version": "0.0.2",
    "description": "Rich Input component for Choiceform Design System",
    "dependencies": {
      "@floating-ui/react": "0.27.15",
      "framer-motion": "^11",
      "slate": "^0.120.0",
      "slate-react": "^0.120.0",
      "slate-history": "^0.113.1",
      "slate-hyperscript": "^0.100.0",
      "ts-pattern": "^5.9.0",
      "usehooks-ts": "^3.1.1",
      "lodash-es": "^4.17.21",
      "@choice-ui/button": "workspace:*",
      "@choice-ui/shared": "workspace:*",
      "@choice-ui/icon-button": "workspace:*",
      "@choiceform/icons-react": "^1.3.8",
      "@choice-ui/link-button": "workspace:*",
      "@choice-ui/scroll-area": "workspace:*",
      "@choice-ui/text-field": "workspace:*"
    },
    "peerDependencies": {
      "react": ">=18.0.0",
      "react-dom": ">=18.0.0"
    }
  },
  "exports": [
    "RichInput",
    "useValidation",
    "useFloatingUI",
    "useEditorState",
    "useEditorConfig",
    "useRichInput",
    "useMouseEvents",
    "useSelectionEvents",
    "useEditorEffects",
    "useKeyboardShortcuts",
    "LIST_TYPES",
    "CHECK_TYPES",
    "toggleMark",
    "isMarkActive",
    "toggleBlock",
    "isBlockActive",
    "charactersOptions",
    "paragraphOptions",
    "slateToMarkdown",
    "markdownToSlate",
    "FormatButton",
    "BlockButton",
    "type FloatingMenuContainerProps",
    "type MotionWrapperProps",
    "FloatingMenuContainer",
    "MotionWrapper",
    "CharactersMenu",
    "ParagraphMenu",
    "UrlMenu",
    "FloatingMenusContainer",
    "RichInputViewport",
    "RichInputEditableComponent",
    "deserialize",
    "withHtml",
    "type ElementRenderProps",
    "ElementRender",
    "LeafRender",
    "RichInputContext",
    "useRichInputContext"
  ],
  "props": [],
  "stories": [
    {
      "id": "forms-richinput--standard",
      "name": "Standard",
      "exportName": "Standard",
      "description": "",
      "source": ""
    },
    {
      "id": "forms-richinput--min-height",
      "name": "Min Height",
      "exportName": "MinHeight",
      "description": "",
      "source": "import { RichInput } from \"@choice-ui/rich-input\"\n\nexport default function App() {\n  return (\n    <RichInput\n      value={value}\n      onChange={setValue}\n      enterFormatting={true}\n      minHeight={200}\n      className=\"max-h-96 w-80 border\"\n    />\n  );\n}"
    },
    {
      "id": "forms-richinput--with-i-18-n",
      "name": "With I 18 N",
      "exportName": "WithI18N",
      "description": "",
      "source": ""
    },
    {
      "id": "forms-richinput--controlled-value",
      "name": "Controlled Value",
      "exportName": "ControlledValue",
      "description": "",
      "source": "import { RichInput } from \"@choice-ui/rich-input\"\n\nexport default function App() {\n  return (\n    <div className=\"w-80 space-y-4\">\n      <div className=\"space-y-2\">\n        <h4 className=\"font-strong\">Value Control Buttons</h4>\n        <div className=\"flex flex-wrap gap-2\">\n          {presetValues.map((preset) => (\n            <Button\n              key={preset.label}\n              variant=\"secondary\"\n              size=\"default\"\n              onClick={() => setValue(preset.value as Descendant[])}\n            >\n              {preset.label}\n            </Button>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"space-y-2\">\n        <h4 className=\"font-strong\">Dynamic Actions</h4>\n        <div className=\"flex flex-wrap gap-2\">\n          <Button\n            variant=\"secondary\"\n            size=\"default\"\n            onClick={() => appendText(\"Great job!\")}\n          >\n            Add &quot;Great job!&quot;\n          </Button>\n          <Button\n            variant=\"secondary\"\n            size=\"default\"\n            onClick={() => appendText(\"üëç\")}\n          >\n            Add üëç\n          </Button>\n          <Button\n            variant=\"secondary\"\n            size=\"default\"\n            onClick={() => appendText(\"Bold text\", { bold: true })}\n          >\n            Add Bold\n          </Button>\n          <Button\n            variant=\"secondary\"\n            size=\"default\"\n            onClick={() => appendText(\"Italic text\", { italic: true })}\n          >\n            Add Italic\n          </Button>\n          <Button\n            variant=\"secondary\"\n            size=\"default\"\n            onClick={() => appendText(\"Link text\", { link: \"https://example.com\" })}\n          >\n            Add Link\n          </Button>\n          <Button\n            variant=\"secondary\"\n            size=\"default\"\n            onClick={() =>\n              setValue([\n                {\n                  type: \"paragraph\",\n                  children: [{ text: faker.lorem.sentence() } as CustomText],\n                } as CustomElement,\n              ])\n            }\n          >\n            Random Text\n          </Button>\n        </div>\n      </div>\n\n      <RichInput\n        value={value}\n        autoFocus\n        autoMoveToEnd\n        placeholder=\"Content is controlled externally...\"\n        className=\"max-h-96 w-80 rounded-lg border\"\n        enterFormatting={true}\n        minHeight={120}\n        onChange={setValue}\n      />\n\n      <div className=\"bg-secondary-background rounded-xl p-4\">\n        <div className=\"mb-2 flex items-center justify-between\">\n          <span className=\"font-strong\">Statistics</span>\n          <Button\n            variant=\"secondary\"\n            size=\"default\"\n            onClick={() =>\n              setValue([\n                {\n                  type: \"paragraph\",\n                  children: [{ text: \"\" } as CustomText],\n                } as CustomElement,\n              ])\n            }\n          >\n            Clear All\n          </Button>\n        </div>\n        <div className=\"text-body-small flex items-center gap-4\">\n          <span className=\"text-secondary-foreground\">\n            Characters: {getCharacterCount(value)}\n          </span>\n          <span className=\"text-secondary-foreground\">Words: {getWordCount(value)}</span>\n          <span className=\"text-secondary-foreground\">\n            Formatted: {getFormattingCount(value)}\n          </span>\n        </div>\n      </div>\n\n      <CodeBlock language=\"tsx\">\n        <CodeBlock.Content code={JSON.stringify(value, null, 2)} />\n      </CodeBlock>\n\n      <div className=\"bg-secondary-background rounded-xl p-4\">\n        <p className=\"font-strong mb-2\">Controlled Value Features:</p>\n        <ul className=\"text-secondary-foreground text-body-small space-y-1\">\n          <li>‚Ä¢ External buttons control rich text content</li>\n          <li>‚Ä¢ Programmatic formatting insertion (bold, italic, links)</li>\n          <li>‚Ä¢ Real-time character, word, and formatting counts</li>\n          <li>‚Ä¢ Preset rich text content examples</li>\n          <li>‚Ä¢ Full bidirectional data binding with Slate.js</li>\n          <li>\n            ‚Ä¢ <strong>Auto-focus:</strong> Editor auto-focuses when autoFocus is enabled\n          </li>\n          <li>\n            ‚Ä¢ <strong>Cursor positioning:</strong> Always moves to end after value changes\n          </li>\n          <li>‚Ä¢ Support for multi-paragraph content structures</li>\n        </ul>\n      </div>\n    </div>\n  );\n}"
    },
    {
      "id": "forms-richinput--composite-usage",
      "name": "Composite Usage",
      "exportName": "CompositeUsage",
      "description": "",
      "source": "import { RichInput } from \"@choice-ui/rich-input\"\n\nexport default function App() {\n  return (\n    <div className=\"w-80 space-y-4\">\n      <div className=\"space-y-2\">\n        <h4 className=\"font-strong\">Composite Component Usage</h4>\n        <p className=\"text-secondary-foreground text-body-small\">\n          This example uses the new RichInput.Viewport and RichInput.Editable structure\n        </p>\n      </div>\n\n      <RichInput\n        value={value}\n        onChange={setValue}\n        enterFormatting={true}\n        minHeight={120}\n        autoFocus\n        className=\"rounded-lg border\"\n      >\n        <RichInput.Viewport className=\"custom-viewport\">\n          <RichInput.Editable className=\"custom-editable\" />\n        </RichInput.Viewport>\n      </RichInput>\n\n      <div className=\"space-y-2\">\n        <h4 className=\"font-strong\">Quick Actions</h4>\n        <div className=\"flex flex-wrap gap-2\">\n          <Button\n            variant=\"secondary\"\n            size=\"default\"\n            onClick={() =>\n              setValue([\n                {\n                  type: \"paragraph\",\n                  children: [\n                    { text: \"Welcome to the \" } as CustomText,\n                    { text: \"new composite API\", bold: true } as CustomText,\n                    { text: \"!\" } as CustomText,\n                  ],\n                } as CustomElement,\n              ])\n            }\n          >\n            Set Welcome Text\n          </Button>\n          <Button\n            variant=\"secondary\"\n            size=\"default\"\n            onClick={() =>\n              setValue([\n                {\n                  type: \"paragraph\",\n                  children: [{ text: \"\" } as CustomText],\n                } as CustomElement,\n              ])\n            }\n          >\n            Clear\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"bg-secondary-background rounded-xl p-4\">\n        <p className=\"font-strong mb-2\">New Composite API Benefits:</p>\n        <ul className=\"text-secondary-foreground text-body-small space-y-1\">\n          <li>‚Ä¢ Greater flexibility in component composition</li>\n          <li>‚Ä¢ Custom styling of Viewport and Editable separately</li>\n          <li>‚Ä¢ Maintains full rich text editing capabilities</li>\n          <li>‚Ä¢ Backwards compatible with simple usage</li>\n          <li>‚Ä¢ Context-based state management</li>\n          <li>‚Ä¢ Easier to integrate with custom layouts</li>\n        </ul>\n      </div>\n    </div>\n  );\n}"
    },
    {
      "id": "forms-richinput--keyboard-shortcuts",
      "name": "Keyboard Shortcuts",
      "exportName": "KeyboardShortcuts",
      "description": "",
      "source": "import { RichInput } from \"@choice-ui/rich-input\"\n\nexport default function App() {\n  return (\n    <div className=\"w-80 space-y-4\">\n      <div className=\"space-y-2\">\n        <h3 className=\"text-body-large font-strong\">Rich Input with Keyboard Shortcuts</h3>\n        <p className=\"text-secondary-foreground\">\n          Focus the editor below and try the keyboard shortcuts\n        </p>\n      </div>\n\n      <RichInput\n        {...args}\n        value={value}\n        onChange={setValue}\n        className=\"min-h-96\"\n      />\n\n      <div className=\"bg-secondary-background rounded-lg border p-3\">\n        <p className=\"text-secondary-foreground text-body-small\">\n          <strong>Tip:</strong> Press ESC to close the paragraph menu if it&apos;s open\n        </p>\n      </div>\n    </div>\n  );\n}"
    },
    {
      "id": "forms-richinput--markdown-export",
      "name": "Markdown Export",
      "exportName": "MarkdownExport",
      "description": "",
      "source": "import { RichInput } from \"@choice-ui/rich-input\"\n\nexport default function App() {\n  return (\n    <div className=\"w-[800px] space-y-4\">\n      <div className=\"space-y-2\">\n        <h3 className=\"text-body-large font-strong\">Rich Input with Markdown Export</h3>\n        <p className=\"text-secondary-foreground\">\n          Edit the content and toggle to see the markdown output\n        </p>\n      </div>\n\n      <div className=\"flex gap-2\">\n        <Button\n          variant={showMarkdown ? \"secondary\" : \"primary\"}\n          size=\"default\"\n          onClick={() => setShowMarkdown(false)}\n        >\n          Editor\n        </Button>\n        <Button\n          variant={showMarkdown ? \"primary\" : \"secondary\"}\n          size=\"default\"\n          onClick={() => setShowMarkdown(true)}\n        >\n          Markdown Output\n        </Button>\n      </div>\n\n      {!showMarkdown ? (\n        <RichInput\n          {...args}\n          value={value}\n          onChange={setValue}\n          className=\"min-h-[400px] rounded-lg border\"\n        />\n      ) : (\n        <div className=\"space-y-4\">\n          <div className=\"bg-secondary-background rounded-lg border p-4\">\n            <h4 className=\"text-body-medium font-strong mb-2\">Markdown Output:</h4>\n            <MdRender content={markdown} />\n          </div>\n\n          <div className=\"rounded-lg border p-4\">\n            <h4 className=\"text-body-medium font-strong mb-2\">Raw Markdown Text:</h4>\n            <pre className=\"text-body-small bg-tertiary-background rounded p-3 font-mono whitespace-pre-wrap\">\n              {markdown}\n            </pre>\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-info-background border-info-border rounded-lg border p-3\">\n        <p className=\"text-info-foreground text-body-small\">\n          <strong>Usage:</strong> Import {\"`slateToMarkdown`\"} from {\"`./utils`\"} and pass your\n          Slate value to convert it to Markdown format.\n        </p>\n      </div>\n    </div>\n  );\n}"
    }
  ]
}