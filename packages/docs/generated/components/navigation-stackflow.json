{
  "slug": "navigation/stackflow",
  "title": "Stackflow",
  "package": {
    "name": "@choice-ui/stackflow",
    "version": "0.0.4",
    "description": "A stack-based navigation flow component for managing sequential views with animations",
    "dependencies": {
      "@choice-ui/shared": "workspace:*",
      "framer-motion": "^11"
    },
    "peerDependencies": {
      "react": ">=18.0.0",
      "react-dom": ">=18.0.0"
    }
  },
  "exports": [
    "Stackflow",
    "type StackflowProps",
    "useStackflowContext"
  ],
  "props": [],
  "stories": [
    {
      "id": "navigation-stackflow--basic",
      "name": "Basic",
      "exportName": "Basic",
      "description": "Stackflow is a **non-linear stack navigation** component for managing multi-page views.\n\n### Core Concepts\n- **Stackflow**: Container component, manages navigation state\n- **Stackflow.Item**: Page component, each `id` corresponds to one page\n- **Stackflow.Prefix**: Fixed header area, does not scroll with pages\n- **Stackflow.Suffix**: Fixed footer area, does not scroll with pages\n- **useStackflowContext**: Hook to access navigation methods and state\n\n### Navigation Methods\n- `push(id)`: Navigate to a specified page and record in history\n- `back()`: Return to the previous page\n- `canGoBack`: Whether there is a previous page to return to\n- `current`: Current page information",
      "source": "import { Stackflow, useStackflowContext } from \"@choice-ui/stackflow\"\n\nexport default function App() {\n\n  // Header component - placed in Stackflow.Prefix, does not scroll with pages\n  const Header = () => {\n    const { push, back, canGoBack, current } = useStackflowContext()\n\n    return (\n      <div className=\"flex items-center justify-between border-b p-3\">\n        <Button\n          variant=\"secondary\"\n          disabled={!canGoBack}\n          onClick={back}\n        >\n          ‚Üê Back\n        </Button>\n        <span className=\"font-strong\">{current?.id}</span>\n        <Button\n          variant=\"primary\"\n          disabled={current?.id === \"page3\"}\n          onClick={() => {\n            const nextMap: Record<string, string> = { page1: \"page2\", page2: \"page3\" }\n            const next = nextMap[current?.id || \"\"]\n            if (next) push(next)\n          }}\n        >\n          Next ‚Üí\n        </Button>\n      </div>\n    )\n  }\n\n  return (\n    <Stackflow\n      className=\"w-80 rounded-xl border\"\n      defaultId=\"page1\"\n    >\n      {/* Fixed header - does not scroll with page content */}\n      <Stackflow.Prefix>\n        <Header />\n      </Stackflow.Prefix>\n\n      {/* Page 1 */}\n      <Stackflow.Item id=\"page1\">\n        <div className=\"p-4\">\n          <h3 className=\"font-strong mb-2\">Page 1</h3>\n          <p className=\"text-secondary-foreground\">Click \"Next\" to navigate to Page 2.</p>\n        </div>\n      </Stackflow.Item>\n\n      {/* Page 2 */}\n      <Stackflow.Item id=\"page2\">\n        <div className=\"p-4\">\n          <h3 className=\"font-strong mb-2\">Page 2</h3>\n          <p className=\"text-secondary-foreground\">\n            Click \"Back\" to return, or \"Next\" to continue.\n          </p>\n        </div>\n      </Stackflow.Item>\n\n      {/* Page 3 */}\n      <Stackflow.Item id=\"page3\">\n        <div className=\"p-4\">\n          <h3 className=\"font-strong mb-2\">Page 3</h3>\n          <p className=\"text-secondary-foreground\">\n            This is the last page. Click \"Back\" to return.\n          </p>\n        </div>\n      </Stackflow.Item>\n    </Stackflow>\n  )\n\n}"
    },
    {
      "id": "navigation-stackflow--non-linear-navigation",
      "name": "Non Linear Navigation",
      "exportName": "NonLinearNavigation",
      "description": "Unlike traditional linear step navigation, Stackflow supports **jumping to any page** at any time.\n\n### Additional Features\n- `history`: Complete navigation history array\n- `clearHistory()`: Clear all history records\n\n### Usage Scenario\n- Wizard flows that allow jumping between steps\n- Settings pages with multiple sub-pages\n- Any scenario requiring page stack management\n\n### Key Difference from Linear Navigation\n- Linear: Page 1 ‚Üí Page 2 ‚Üí Page 3 (can only go forward/backward in order)\n- Non-linear: Can jump from any page to any other page, history still tracks all visited pages",
      "source": "import { Stackflow, useStackflowContext } from \"@choice-ui/stackflow\"\n\nexport default function App() {\n\n  // Header - displays navigation buttons, current page, and history\n  const Header = () => {\n    const { push, back, clearHistory, canGoBack, history, current } = useStackflowContext()\n\n    return (\n      <div className=\"flex flex-col gap-3 border-b p-4\">\n        {/* Navigation buttons - can jump to any page */}\n        <div className=\"flex flex-wrap gap-2\">\n          {[\"home\", \"profile\", \"settings\", \"help\"].map((page) => (\n            <Button\n              key={page}\n              variant={current?.id === page ? \"primary\" : \"secondary\"}\n              onClick={() => push(page)}\n            >\n              {page.charAt(0).toUpperCase() + page.slice(1)}\n            </Button>\n          ))}\n        </div>\n\n        {/* Control buttons and status display */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"secondary\"\n              disabled={!canGoBack}\n              onClick={back}\n            >\n              ‚Üê Back\n            </Button>\n            <Button\n              variant=\"link-danger\"\n              onClick={clearHistory}\n            >\n              Clear\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"flex flex-wrap items-center gap-2\">\n          <span>History:</span>\n          {history.length > 0\n            ? history.map((page, index) => (\n                <Fragment key={index}>\n                  <Badge>{page}</Badge>\n                  {index < history.length - 1 && \" ‚Üí \"}\n                </Fragment>\n              ))\n            : \"(empty)\"}\n        </div>\n      </div>\n    )\n  }\n\n  // Page content component\n  const Page = ({ title, desc }: { desc: string; title: string }) => (\n    <div className=\"p-6\">\n      <h2 className=\"text-heading-display mb-2\">{title}</h2>\n      <p className=\"text-secondary-foreground\">{desc}</p>\n    </div>\n  )\n\n  return (\n    <Stackflow\n      className=\"w-[420px] rounded-xl border\"\n      defaultId=\"home\"\n    >\n      <Stackflow.Prefix>\n        <Header />\n      </Stackflow.Prefix>\n\n      <Stackflow.Item id=\"home\">\n        <Page\n          title=\"üè† Home\"\n          desc=\"Try clicking different buttons above to jump between pages. Observe how the history changes.\"\n        />\n      </Stackflow.Item>\n\n      <Stackflow.Item id=\"profile\">\n        <Page\n          title=\"üë§ Profile\"\n          desc=\"You can jump to any page from here, not limited to sequential navigation.\"\n        />\n      </Stackflow.Item>\n\n      <Stackflow.Item id=\"settings\">\n        <Page\n          title=\"‚öôÔ∏è Settings\"\n          desc=\"Click 'Back' to return step by step through your visit history.\"\n        />\n      </Stackflow.Item>\n\n      <Stackflow.Item id=\"help\">\n        <Page\n          title=\"‚ùì Help\"\n          desc=\"Click 'Clear' to reset all history and return to the initial page.\"\n        />\n      </Stackflow.Item>\n\n      {/* Fixed footer - does not scroll with page content */}\n      <Stackflow.Suffix>\n        <div className=\"text-secondary-foreground bg-secondary-background border-t p-4\">\n          üí° Stackflow.Prefix and Stackflow.Suffix are always fixed and do not scroll with page\n          content\n        </div>\n      </Stackflow.Suffix>\n    </Stackflow>\n  )\n\n}"
    },
    {
      "id": "navigation-stackflow--use-stackflow-context",
      "name": "Use Stackflow Context",
      "exportName": "UseStackflowContext",
      "description": "`useStackflowContext` is a hook that provides access to the navigation state and methods.\n\n### Return Values\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `push` | `(id: string) => void` | Navigate to a page by id |\n| `back` | `() => void` | Go back to the previous page |\n| `clearHistory` | `() => void` | Clear history and return to the first page |\n| `canGoBack` | `boolean` | Whether there's a previous page |\n| `current` | `{ id, content } \\| undefined` | Current page info |\n| `history` | `string[]` | Array of visited page ids |\n| `direction` | `\"forward\" \\| \"backward\"` | Current navigation direction |\n| `isInitial` | `boolean` | Whether it's the initial render |\n\n### Usage\n```tsx\nconst { push, back, canGoBack, current, history, direction, isInitial, clearHistory } = useStackflowContext()\n```",
      "source": "import { Stackflow, useStackflowContext } from \"@choice-ui/stackflow\"\n\nexport default function App() {\n\n  // Status panel - displays all values from useStackflowContext\n  const StatusPanel = () => {\n    const { push, back, clearHistory, canGoBack, current, history, direction, isInitial } =\n      useStackflowContext()\n\n    return (\n      <div className=\"flex flex-col gap-4 border-b p-4\">\n        {/* Navigation buttons */}\n        <div className=\"flex flex-wrap gap-2\">\n          <Button\n            variant=\"secondary\"\n            disabled={!canGoBack}\n            onClick={back}\n          >\n            back()\n          </Button>\n          <Button\n            variant=\"secondary\"\n            onClick={() => push(\"step1\")}\n          >\n            push(\"step1\")\n          </Button>\n          <Button\n            variant=\"secondary\"\n            onClick={() => push(\"step2\")}\n          >\n            push(\"step2\")\n          </Button>\n          <Button\n            variant=\"secondary\"\n            onClick={() => push(\"step3\")}\n          >\n            push(\"step3\")\n          </Button>\n          <Button\n            variant=\"link-danger\"\n            onClick={clearHistory}\n          >\n            clearHistory()\n          </Button>\n        </div>\n\n        {/* Status display */}\n        <div className=\"bg-secondary-background grid grid-cols-2 gap-2 rounded-lg p-3 text-sm\">\n          <div>\n            <span className=\"text-secondary-foreground\">current?.id:</span>{\" \"}\n            <Badge variant=\"brand\">{current?.id || \"undefined\"}</Badge>\n          </div>\n          <div>\n            <span className=\"text-secondary-foreground\">canGoBack:</span>{\" \"}\n            <Badge variant={canGoBack ? \"success\" : \"default\"}>\n              {canGoBack ? \"true\" : \"false\"}\n            </Badge>\n          </div>\n          <div>\n            <span className=\"text-secondary-foreground\">direction:</span>{\" \"}\n            <Badge variant={direction === \"forward\" ? \"brand\" : \"warning\"}>{direction}</Badge>\n          </div>\n          <div>\n            <span className=\"text-secondary-foreground\">isInitial:</span>{\" \"}\n            <Badge variant={isInitial ? \"success\" : \"default\"}>\n              {isInitial ? \"true\" : \"false\"}\n            </Badge>\n          </div>\n          <div className=\"col-span-2\">\n            <span className=\"text-secondary-foreground\">history:</span>{\" \"}\n            <span className=\"font-mono\">[{history.map((h) => `\"${h}\"`).join(\", \")}]</span>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <Stackflow\n      className=\"w-[480px] rounded-xl border\"\n      defaultId=\"step1\"\n    >\n      <Stackflow.Prefix>\n        <StatusPanel />\n      </Stackflow.Prefix>\n\n      <Stackflow.Item id=\"step1\">\n        <div className=\"p-4\">\n          <h3 className=\"font-strong mb-2\">Step 1</h3>\n          <p className=\"text-secondary-foreground\">\n            Click the buttons above to navigate and observe how each value changes.\n          </p>\n        </div>\n      </Stackflow.Item>\n\n      <Stackflow.Item id=\"step2\">\n        <div className=\"p-4\">\n          <h3 className=\"font-strong mb-2\">Step 2</h3>\n          <p className=\"text-secondary-foreground\">\n            Notice how `direction` changes to \"forward\" when using push() and \"backward\" when\n            using back().\n          </p>\n        </div>\n      </Stackflow.Item>\n\n      <Stackflow.Item id=\"step3\">\n        <div className=\"p-4\">\n          <h3 className=\"font-strong mb-2\">Step 3</h3>\n          <p className=\"text-secondary-foreground\">\n            The `isInitial` becomes false after the first navigation. Use clearHistory() to reset.\n          </p>\n        </div>\n      </Stackflow.Item>\n    </Stackflow>\n  )\n\n}"
    }
  ],
  "tags": [
    "new"
  ]
}