{
  "slug": "collections/dropdown",
  "title": "Dropdown",
  "package": {
    "name": "@choice-ui/dropdown",
    "version": "0.0.9",
    "description": "Dropdown component for Choiceform Design System",
    "dependencies": {
      "@choice-ui/shared": "workspace:*",
      "@choice-ui/menus": "workspace:*",
      "@choice-ui/slot": "workspace:*",
      "@floating-ui/react": "0.27.15",
      "usehooks-ts": "^3.1.0"
    },
    "peerDependencies": {
      "react": ">=18.0.0",
      "react-dom": ">=18.0.0"
    }
  },
  "exports": [
    "Dropdown",
    "type DropdownProps"
  ],
  "props": [
    {
      "displayName": "DropdownProps",
      "description": "",
      "props": [
        {
          "name": "autoSelectFirstItem",
          "type": "boolean | undefined",
          "required": false,
          "defaultValue": "true",
          "description": "Whether to automatically select the first item in coordinate mode."
        },
        {
          "name": "disabledNested",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "focusManagerProps",
          "type": "Partial<FloatingFocusManagerProps> | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "matchTriggerWidth",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "offset",
          "type": "number | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onOpenChange",
          "type": "((open: boolean) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "open",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "placement",
          "type": "undefined | \"top\" | \"right\" | \"bottom\" | \"left\" | \"top-start\" | \"top-end\" | \"right-start\" | \"right-end\" | \"bottom-start\" | \"bottom-end\" | \"left-start\" | \"left-end\"",
          "required": false,
          "description": ""
        },
        {
          "name": "portalId",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "position",
          "type": "{ x: number; y: number; } | null | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "readOnly",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "root",
          "type": "HTMLElement | null | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "selection",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "triggerRef",
          "type": "RefObject<HTMLElement> | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "triggerSelector",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "variant",
          "type": "undefined | \"default\" | \"light\" | \"reset\"",
          "required": false,
          "description": ""
        }
      ]
    }
  ],
  "stories": [
    {
      "id": "collections-dropdown--basic",
      "name": "Basic",
      "exportName": "Basic",
      "description": "Basic dropdown with simple menu items using the new MenuContext system.\n\nFeatures:\n- Enhanced MenuContextItem components\n- Unified interaction handling\n- Improved keyboard navigation\n- Better event handling with useEventCallback",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Dropdown>\n      <Dropdown.Trigger>\n        <Dropdown.Value>Basic Menu</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Item>\n          <Dropdown.Value>Edit</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item>\n          <Dropdown.Value>Copy</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item>\n          <Dropdown.Value>Paste</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Divider />\n        <Dropdown.Item variant=\"danger\">\n          <Dropdown.Value>Delete</Dropdown.Value>\n        </Dropdown.Item>\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--with-prefix",
      "name": "With Prefix",
      "exportName": "WithPrefix",
      "description": "Dropdown with prefix icons for better visual recognition.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Dropdown>\n      <Dropdown.Trigger prefixElement={<File />}>\n        <Dropdown.Value>File Actions</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Item prefixElement={<File />}>\n          <Dropdown.Value>Attach File</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item prefixElement={<Search />}>\n          <Dropdown.Value>Search Files</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Divider />\n        <Dropdown.Item prefixElement={<Settings />}>\n          <Dropdown.Value>File Settings</Dropdown.Value>\n        </Dropdown.Item>\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--trigger-as-child",
      "name": "Trigger As Child",
      "exportName": "TriggerAsChild",
      "description": "Custom trigger using asChild pattern for complete control.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Dropdown>\n      <Dropdown.Trigger asChild>\n        <IconButton>\n          <Settings />\n        </IconButton>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Item>\n          <Dropdown.Value>Settings</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item>\n          <Dropdown.Value>Preferences</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Divider />\n        <Dropdown.Item>\n          <Dropdown.Value>Help</Dropdown.Value>\n        </Dropdown.Item>\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--nested",
      "name": "Nested",
      "exportName": "Nested",
      "description": "Nested dropdown menus showcasing the enhanced FloatingTree support.\n\nFeatures:\n- Multiple levels of nesting\n- Automatic submenu positioning\n- Hover-based submenu activation\n- Tree event management for proper closing",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Dropdown>\n      <Dropdown.Trigger>\n        <Dropdown.Value>Nested Menu</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Item>\n          <Dropdown.Value>File</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item>\n          <Dropdown.Value>Edit</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown>\n          <Dropdown.SubTrigger>\n            <Dropdown.Value>View</Dropdown.Value>\n          </Dropdown.SubTrigger>\n          <Dropdown.Content>\n            <Dropdown.Item>\n              <Dropdown.Value>Zoom In</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Item>\n              <Dropdown.Value>Zoom Out</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown>\n              <Dropdown.SubTrigger>\n                <Dropdown.Value>Layout</Dropdown.Value>\n              </Dropdown.SubTrigger>\n              <Dropdown.Content>\n                <Dropdown.Item>\n                  <Dropdown.Value>Sidebar</Dropdown.Value>\n                </Dropdown.Item>\n                <Dropdown.Item>\n                  <Dropdown.Value>Footer</Dropdown.Value>\n                </Dropdown.Item>\n                <Dropdown.Item>\n                  <Dropdown.Value>Fullscreen</Dropdown.Value>\n                </Dropdown.Item>\n              </Dropdown.Content>\n            </Dropdown>\n          </Dropdown.Content>\n        </Dropdown>\n        <Dropdown.Divider />\n        <Dropdown.Item>\n          <Dropdown.Value>Help</Dropdown.Value>\n        </Dropdown.Item>\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--nested-in-popover",
      "name": "Nested In Popover",
      "exportName": "NestedInPopover",
      "description": "Nested dropdown in `Popover` or `Dialog`\n\nNote: When using Dropdown nested inside a Popover or Dialog, you must pass the\n`disabledNested={true}` prop to ensure proper rendering.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Popover>\n      <Popover.Trigger>\n        <Button>Open Popover</Button>\n      </Popover.Trigger>\n      <Popover.Content className=\"flex w-48 flex-col gap-2 p-4\">\n        <p>\n          Note: When using Dropdown nested inside a Popover or Dialog, you must pass the\n          `disabledNested={true}` prop to ensure proper rendering.\n        </p>\n        <Dropdown disabledNested>\n          <Dropdown.Trigger>\n            <Dropdown.Value>Nested Menu</Dropdown.Value>\n          </Dropdown.Trigger>\n          <Dropdown.Content>\n            <Dropdown.Item>\n              <Dropdown.Value>Option 1</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Item>\n              <Dropdown.Value>Option 2</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Item>\n              <Dropdown.Value>Option 3</Dropdown.Value>\n            </Dropdown.Item>\n          </Dropdown.Content>\n        </Dropdown>\n      </Popover.Content>\n    </Popover>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--selection",
      "name": "Selection",
      "exportName": "Selection",
      "description": "Selection dropdown with visual indicators using the MenuContext system.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [selected, setSelected] = useState<string | null>(\"option-2\")\n  const options = [\"Option 1\", \"Option 2\", \"Option 3\", \"Option 4\"]\n\n  return (\n    <Dropdown selection={true}>\n      <Dropdown.Trigger>\n        <Dropdown.Value>Theme: {selected || \"None\"}</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Label>Select Theme</Dropdown.Label>\n        {options.map((option) => (\n          <Dropdown.Item\n            key={option}\n            selected={selected === option}\n            onClick={() => setSelected(option)}\n          >\n            <Dropdown.Value>{option}</Dropdown.Value>\n          </Dropdown.Item>\n        ))}\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--nested-selection",
      "name": "Nested Selection",
      "exportName": "NestedSelection",
      "description": "Nested dropdown with selection functionality in submenus.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  // 使用统一的状态管理所有选项，确保互斥\n  const [selected, setSelected] = useState<string | null>(null)\n\n  return (\n    <Dropdown selection={true}>\n      <Dropdown.Trigger>\n        <Dropdown.Value>Multi-Level Selection</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Label>Main Options</Dropdown.Label>\n        {[\"Main 1\", \"Main 2\"].map((option) => (\n          <Dropdown.Item\n            key={option}\n            selected={selected === option}\n            onPointerUp={() => setSelected(option)}\n          >\n            <Dropdown.Value>{option}</Dropdown.Value>\n          </Dropdown.Item>\n        ))}\n        <Dropdown.Divider />\n        <Dropdown selection={true}>\n          <Dropdown.SubTrigger\n            selected={selected === \"Sub Options\"}\n            onPointerUp={() => setSelected(\"Sub Options\")}\n          >\n            <Dropdown.Value>Sub Options</Dropdown.Value>\n          </Dropdown.SubTrigger>\n          <Dropdown.Content>\n            <Dropdown.Label>Choose Sub Option</Dropdown.Label>\n            {[\"Sub A\", \"Sub B\", \"Sub C\"].map((option) => (\n              <Dropdown.Item\n                key={option}\n                selected={selected === option}\n                onClick={() => setSelected(option)}\n              >\n                <Dropdown.Value>{option}</Dropdown.Value>\n              </Dropdown.Item>\n            ))}\n          </Dropdown.Content>\n        </Dropdown>\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--with-shortcuts",
      "name": "With Shortcuts",
      "exportName": "WithShortcuts",
      "description": "Dropdown with keyboard shortcuts displayed.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Dropdown>\n      <Dropdown.Trigger>\n        <Dropdown.Value>Editor Menu</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Item\n          shortcut={{\n            modifier: \"command\",\n            keys: \"N\",\n          }}\n        >\n          <Dropdown.Value>New File</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item\n          shortcut={{\n            modifier: \"command\",\n            keys: \"O\",\n          }}\n        >\n          <Dropdown.Value>Open File</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item\n          shortcut={{\n            modifier: \"command\",\n            keys: \"S\",\n          }}\n        >\n          <Dropdown.Value>Save</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Divider />\n        <Dropdown.Item\n          shortcut={{\n            modifier: \"command\",\n            keys: \"Z\",\n          }}\n        >\n          <Dropdown.Value>Undo</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item\n          shortcut={{\n            modifier: \"shift\",\n            keys: \"Command+Z\",\n          }}\n        >\n          <Dropdown.Value>Redo</Dropdown.Value>\n        </Dropdown.Item>\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--disabled",
      "name": "Disabled",
      "exportName": "Disabled",
      "description": "Dropdown with disabled states for both trigger and items.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <div className=\"flex gap-4\">\n      <Dropdown>\n        <Dropdown.Trigger disabled>\n          <Dropdown.Value>Disabled Trigger</Dropdown.Value>\n        </Dropdown.Trigger>\n        <Dropdown.Content>\n          <Dropdown.Item>\n            <Dropdown.Value>Option 1</Dropdown.Value>\n          </Dropdown.Item>\n          <Dropdown.Item>\n            <Dropdown.Value>Option 2</Dropdown.Value>\n          </Dropdown.Item>\n        </Dropdown.Content>\n      </Dropdown>\n\n      <Dropdown>\n        <Dropdown.Trigger>\n          <Dropdown.Value>Disabled Items</Dropdown.Value>\n        </Dropdown.Trigger>\n        <Dropdown.Content>\n          <Dropdown.Item>\n            <Dropdown.Value>Available Option</Dropdown.Value>\n          </Dropdown.Item>\n          <Dropdown.Item disabled>\n            <Dropdown.Value>Disabled Option</Dropdown.Value>\n          </Dropdown.Item>\n          <Dropdown.Item>\n            <Dropdown.Value>Another Available</Dropdown.Value>\n          </Dropdown.Item>\n        </Dropdown.Content>\n      </Dropdown>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--with-search",
      "name": "With Search",
      "exportName": "WithSearch",
      "description": "Dropdown with search functionality and empty states.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\nimport { useState, useEffect, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [search, setSearch] = useState(\"\")\n  const [selected, setSelected] = useState<string[]>([])\n  const [isOpen, setIsOpen] = useState(false)\n\n  const allOptions = useMemo(\n    () =>\n      Array.from({ length: 8 }, (_, i) => ({\n        id: `option-${i + 1}`,\n        label: faker.music.genre(),\n      })),\n    [],\n  )\n\n  const filteredOptions = useMemo(\n    () =>\n      allOptions.filter((option) => option.label.toLowerCase().includes(search.toLowerCase())),\n    [allOptions, search],\n  )\n\n  useEffect(() => {\n    if (!isOpen) {\n      setSearch(\"\")\n    }\n  }, [isOpen])\n\n  return (\n    <Dropdown\n      selection={true}\n      open={isOpen}\n      onOpenChange={setIsOpen}\n    >\n      <Dropdown.Trigger>\n        <Dropdown.Value>Search Music ({selected.length} selected)</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Search\n          value={search}\n          onChange={setSearch}\n          placeholder=\"Search genres...\"\n        />\n        <Dropdown.Divider />\n\n        {filteredOptions.length > 0 ? (\n          <>\n            <Dropdown.Label>Music Genres</Dropdown.Label>\n            {filteredOptions.map((option) => (\n              <Dropdown.Item\n                key={option.id}\n                selected={selected.includes(option.id)}\n                onClick={() => {\n                  setSelected((prev) =>\n                    prev.includes(option.id)\n                      ? prev.filter((id) => id !== option.id)\n                      : [...prev, option.id],\n                  )\n                }}\n              >\n                <Dropdown.Value>{option.label}</Dropdown.Value>\n              </Dropdown.Item>\n            ))}\n            {selected.length > 0 && (\n              <>\n                <Dropdown.Divider />\n                <Dropdown.Button onClick={() => setSelected([])}>\n                  Clear All Selections\n                </Dropdown.Button>\n              </>\n            )}\n          </>\n        ) : (\n          <div className=\"flex h-32 flex-col items-center justify-center gap-2 text-center text-white/40\">\n            <Search\n              width={24}\n              height={24}\n            />\n            <span>No results found</span>\n            <Button\n              variant=\"link\"\n              onClick={() => setSearch(\"\")}\n            >\n              Clear Search\n            </Button>\n          </div>\n        )}\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--with-labels",
      "name": "With Labels",
      "exportName": "WithLabels",
      "description": "Dropdown with labels and organized sections.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Dropdown>\n      <Dropdown.Trigger>\n        <Dropdown.Value>Application Menu</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Label>File Operations</Dropdown.Label>\n        <Dropdown.Item>\n          <Dropdown.Value>New Document</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item>\n          <Dropdown.Value>Open File</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item>\n          <Dropdown.Value>Save</Dropdown.Value>\n        </Dropdown.Item>\n\n        <Dropdown.Divider />\n\n        <Dropdown.Label>Edit Operations</Dropdown.Label>\n        <Dropdown.Item>\n          <Dropdown.Value>Cut</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item>\n          <Dropdown.Value>Copy</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item>\n          <Dropdown.Value>Paste</Dropdown.Value>\n        </Dropdown.Item>\n\n        <Dropdown.Divider />\n\n        <Dropdown.Label>Tools</Dropdown.Label>\n        <Dropdown.Item>\n          <Dropdown.Value>Settings</Dropdown.Value>\n        </Dropdown.Item>\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--long-list",
      "name": "Long List",
      "exportName": "LongList",
      "description": "Long list demonstrating scrolling behavior and performance.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Dropdown>\n      <Dropdown.Trigger>\n        <Dropdown.Value>Long List (100 items)</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Label>Countries</Dropdown.Label>\n        {Array.from({ length: 100 }, (_, i) => (\n          <Dropdown.Item key={i}>\n            <Dropdown.Value>\n              {faker.location.country()} {i + 1}\n            </Dropdown.Value>\n          </Dropdown.Item>\n        ))}\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--placement",
      "name": "Placement",
      "exportName": "Placement",
      "description": "Dropdown with different placement options.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <div className=\"flex flex-wrap gap-4\">\n      <Dropdown placement=\"bottom-start\">\n        <Dropdown.Trigger>\n          <Dropdown.Value>Bottom Start</Dropdown.Value>\n        </Dropdown.Trigger>\n        <Dropdown.Content>\n          <Dropdown.Item>Option 1</Dropdown.Item>\n          <Dropdown.Item>Option 2</Dropdown.Item>\n          <Dropdown.Item>Option 3</Dropdown.Item>\n        </Dropdown.Content>\n      </Dropdown>\n\n      <Dropdown placement=\"bottom-end\">\n        <Dropdown.Trigger>\n          <Dropdown.Value>Bottom End</Dropdown.Value>\n        </Dropdown.Trigger>\n        <Dropdown.Content>\n          <Dropdown.Item>Option 1</Dropdown.Item>\n          <Dropdown.Item>Option 2</Dropdown.Item>\n          <Dropdown.Item>Option 3</Dropdown.Item>\n        </Dropdown.Content>\n      </Dropdown>\n\n      <Dropdown placement=\"right-start\">\n        <Dropdown.Trigger>\n          <Dropdown.Value>Right Start</Dropdown.Value>\n        </Dropdown.Trigger>\n        <Dropdown.Content>\n          <Dropdown.Item>Option 1</Dropdown.Item>\n          <Dropdown.Item>Option 2</Dropdown.Item>\n          <Dropdown.Item>Option 3</Dropdown.Item>\n        </Dropdown.Content>\n      </Dropdown>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--complex-menu",
      "name": "Complex Menu",
      "exportName": "ComplexMenu",
      "description": "Advanced example showing complex menu structure with mixed features.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [theme, setTheme] = useState(\"light\")\n  const [language, setLanguage] = useState(\"English\")\n\n  return (\n    <Dropdown>\n      <Dropdown.Trigger prefixElement={<Settings />}>\n        <Dropdown.Value>Application Settings</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Label>User Preferences</Dropdown.Label>\n        <Dropdown.Item>\n          <Dropdown.Value>Profile Settings</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item>\n          <Dropdown.Value>Account Security</Dropdown.Value>\n        </Dropdown.Item>\n\n        <Dropdown.Divider />\n\n        <Dropdown selection={true}>\n          <Dropdown.SubTrigger>\n            <Dropdown.Value>Theme: {theme}</Dropdown.Value>\n          </Dropdown.SubTrigger>\n          <Dropdown.Content>\n            <Dropdown.Label>Choose Theme</Dropdown.Label>\n            {[\"Light\", \"Dark\", \"Auto\"].map((option) => (\n              <Dropdown.Item\n                key={option}\n                selected={theme === option.toLowerCase()}\n                onClick={() => setTheme(option.toLowerCase())}\n              >\n                <Dropdown.Value>{option}</Dropdown.Value>\n              </Dropdown.Item>\n            ))}\n          </Dropdown.Content>\n        </Dropdown>\n\n        <Dropdown selection={true}>\n          <Dropdown.SubTrigger>\n            <Dropdown.Value>Language: {language}</Dropdown.Value>\n          </Dropdown.SubTrigger>\n          <Dropdown.Content>\n            <Dropdown.Label>Choose Language</Dropdown.Label>\n            {[\"English\", \"Spanish\", \"French\", \"German\"].map((option) => (\n              <Dropdown.Item\n                key={option}\n                selected={language === option}\n                onClick={() => setLanguage(option)}\n              >\n                <Dropdown.Value>{option}</Dropdown.Value>\n              </Dropdown.Item>\n            ))}\n          </Dropdown.Content>\n        </Dropdown>\n\n        <Dropdown.Divider />\n\n        <Dropdown.Item shortcut={{ modifier: \"command\", keys: \",\" }}>\n          <Dropdown.Value>Open Preferences</Dropdown.Value>\n        </Dropdown.Item>\n\n        <Dropdown.Divider />\n\n        <Dropdown.Item variant=\"danger\">\n          <Dropdown.Value>Sign Out</Dropdown.Value>\n        </Dropdown.Item>\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--large",
      "name": "Large",
      "exportName": "Large",
      "description": "",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Dropdown>\n      <Dropdown.Trigger size=\"large\">\n        <Dropdown.Value>Large</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Item size=\"large\">Option 1</Dropdown.Item>\n        <Dropdown.Item size=\"large\">Option 2</Dropdown.Item>\n        <Dropdown.Item size=\"large\">Option 3</Dropdown.Item>\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--match-trigger-width",
      "name": "Match Trigger Width",
      "exportName": "MatchTriggerWidth",
      "description": "Match trigger width",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Dropdown matchTriggerWidth>\n      <Dropdown.Trigger className=\"w-64\">\n        <Dropdown.Value>Match Trigger Width</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Item>Option 1</Dropdown.Item>\n        <Dropdown.Item>Option 2</Dropdown.Item>\n        <Dropdown.Item>Option 3</Dropdown.Item>\n      </Dropdown.Content>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--coordinate-mode",
      "name": "Coordinate Mode",
      "exportName": "CoordinateMode",
      "description": "Coordinate mode - Dropdown without trigger, positioned at specific coordinates\nThis mode replaces the deprecated CoordinateMenu component\n- This demonstrates the Dropdown component in coordinate mode - no trigger element,\n- Positioned at specific x/y coordinates. Perfect for context menus, mentions, etc.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [isOpen, setIsOpen] = useState(false)\n  const [position, setPosition] = useState<{ x: number; y: number } | null>(null)\n  const [autoSelectFirstItem, setAutoSelectFirstItem] = useState(true)\n\n  const handleClick = (event: React.MouseEvent) => {\n    setPosition({\n      x: event.clientX,\n      y: event.clientY,\n    })\n    setIsOpen(true)\n  }\n\n  return (\n    <div className=\"w-80 space-y-4\">\n      <Checkbox\n        value={autoSelectFirstItem}\n        onChange={setAutoSelectFirstItem}\n      >\n        Auto Select First Item\n      </Checkbox>\n\n      <div\n        className=\"bg-secondary-background relative h-64 rounded-lg border border-dashed p-4\"\n        onMouseDown={handleClick}\n      >\n        <p className=\"text-secondary-foreground text-center\">\n          Click anywhere in this area to show dropdown at mouse position\n        </p>\n      </div>\n\n      {/* Dropdown in coordinate mode */}\n      <div>\n        <Dropdown\n          autoSelectFirstItem={autoSelectFirstItem}\n          position={position}\n          open={isOpen}\n          onOpenChange={setIsOpen}\n          placement=\"bottom-start\"\n        >\n          <Dropdown.Content>\n            <Dropdown.Label>Context Menu</Dropdown.Label>\n            <Dropdown.Item onClick={() => setIsOpen(false)}>\n              <Dropdown.Value>Cut</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Item onClick={() => setIsOpen(false)}>\n              <Dropdown.Value>Copy</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Divider />\n            <Dropdown.Item onClick={() => setIsOpen(false)}>\n              <Dropdown.Value>Paste</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Divider />\n            <Dropdown.Item\n              variant=\"danger\"\n              onClick={() => setIsOpen(false)}\n            >\n              <Dropdown.Value>Delete</Dropdown.Value>\n            </Dropdown.Item>\n          </Dropdown.Content>\n        </Dropdown>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--mentions-with-coordinate-mode",
      "name": "Mentions With Coordinate Mode",
      "exportName": "MentionsWithCoordinateMode",
      "description": "Mentions example using coordinate mode with Slate.js editor\n- Type @ to trigger the mentions menu. This uses a simple Slate.js editor with Dropdown in coordinate mode.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\nimport { useState, useCallback, useMemo, useRef } from \"react\"\n\nexport default function App() {\n\n  const [isOpen, setIsOpen] = useState(false)\n  const [position, setPosition] = useState<{ x: number; y: number } | null>(null)\n  const editorRef = useRef<HTMLDivElement>(null)\n\n  // 创建 Slate 编辑器实例\n  const editor = useMemo(() => withReact(createEditor()), [])\n\n  // 初始值 - 使用类型断言来确保类型安全\n  const initialValue: Descendant[] = [\n    {\n      type: \"paragraph\",\n      children: [{ text: \"\" }],\n    } as Descendant,\n  ]\n  const [value, setValue] = useState<Descendant[]>(initialValue)\n\n  const mentionUsers = [\n    {\n      id: \"1\",\n      name: \"John Doe\",\n      avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=john\",\n      role: \"Software Engineer\",\n    },\n    {\n      id: \"2\",\n      name: \"Jane Smith\",\n      avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=jane\",\n      role: \"Product Manager\",\n    },\n    {\n      id: \"3\",\n      name: \"Bob Wilson\",\n      avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=bob\",\n      role: \"Designer\",\n    },\n  ]\n\n  // 获取编辑器文本内容\n  const getEditorText = useCallback(() => {\n    return value.map((n) => Node.string(n)).join(\"\\n\")\n  }, [value])\n\n  // 处理编辑器内容变化\n  const handleChange = useCallback((newValue: Descendant[]) => {\n    setValue(newValue)\n\n    const text = newValue.map((n) => Node.string(n)).join(\"\\n\")\n    const lastAtIndex = text.lastIndexOf(\"@\")\n\n    // 检查 @ 是否存在，并且 @ 后面没有空格或者是文本的末尾\n    if (lastAtIndex !== -1) {\n      const afterAt = text.substring(lastAtIndex + 1)\n      const hasSpaceAfterAt = afterAt.includes(\" \") || afterAt.includes(\"\\n\")\n\n      if (!hasSpaceAfterAt) {\n        // 获取编辑器位置\n        const domSelection = window.getSelection()\n        if (domSelection && domSelection.rangeCount > 0) {\n          const range = domSelection.getRangeAt(0)\n          const rect = range.getBoundingClientRect()\n          setPosition({\n            x: rect.left,\n            y: rect.bottom + 4,\n          })\n        } else if (editorRef.current) {\n          // 备选方案：使用编辑器容器位置\n          const rect = editorRef.current.getBoundingClientRect()\n          setPosition({\n            x: rect.left,\n            y: rect.bottom + 4,\n          })\n        }\n        setIsOpen(true)\n      } else {\n        setIsOpen(false)\n      }\n    } else {\n      setIsOpen(false)\n    }\n  }, [])\n\n  // 处理用户选择\n  const handleSelectUser = useCallback(\n    (user: (typeof mentionUsers)[0]) => {\n      // 使用 Slate 的 API 来正确插入提及内容\n      const { selection } = editor\n\n      if (selection) {\n        // 获取当前文本和光标位置\n        const text = getEditorText()\n        const lastAtIndex = text.lastIndexOf(\"@\")\n\n        if (lastAtIndex !== -1) {\n          // 计算需要替换的范围\n          const afterAtText = text.substring(lastAtIndex + 1)\n\n          // 创建选择范围，从 @ 开始到当前光标位置\n          const start = { path: [0, 0], offset: lastAtIndex }\n          const end = {\n            path: [0, 0],\n            offset: lastAtIndex + 1 + afterAtText.length,\n          }\n          const range = { anchor: start, focus: end }\n\n          // 选择要替换的文本范围\n          Transforms.select(editor, range)\n\n          // 插入提及文本\n          Transforms.insertText(editor, `@${user.name} `)\n        }\n      }\n\n      setIsOpen(false)\n      // 保持编辑器焦点\n      ReactEditor.focus(editor)\n    },\n    [editor, getEditorText],\n  )\n\n  return (\n    <div className=\"w-80 space-y-4\">\n      {/* 简单的 Slate 编辑器 */}\n      <div\n        ref={editorRef}\n        className=\"focus-within:border-selected-boundary min-h-[80px] w-full rounded-lg border p-2\"\n      >\n        <Slate\n          editor={editor}\n          initialValue={initialValue}\n          onChange={handleChange}\n        >\n          <Editable\n            placeholder=\"Type @ to mention someone...\"\n            className=\"outline-none\"\n            style={{ minHeight: \"56px\" }}\n          />\n        </Slate>\n      </div>\n\n      {/* Dropdown 菜单 */}\n      <div>\n        <Dropdown\n          position={position}\n          open={isOpen}\n          onOpenChange={setIsOpen}\n          placement=\"bottom-start\"\n          focusManagerProps={{\n            initialFocus: 0,\n          }}\n        >\n          <Dropdown.Content>\n            <Dropdown.Label>Mention User</Dropdown.Label>\n            {mentionUsers.map((user) => (\n              <Dropdown.Item\n                key={user.id}\n                onClick={() => handleSelectUser(user)}\n                prefixElement={\n                  <img\n                    src={user.avatar}\n                    alt={user.name}\n                    className=\"size-4 rounded-full\"\n                  />\n                }\n              >\n                <Dropdown.Value>{user.name}</Dropdown.Value>\n              </Dropdown.Item>\n            ))}\n          </Dropdown.Content>\n        </Dropdown>\n      </div>\n\n      {/* 显示当前值用于调试 */}\n      <div className=\"bg-secondary-background text-secondary-foreground rounded-lg p-2\">\n        Current text: &ldquo;{getEditorText()}&rdquo;\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--nested-submenu-with-long-list",
      "name": "Nested Submenu With Long List",
      "exportName": "NestedSubmenuWithLongList",
      "description": "NestedSubmenuWithLongList: Tests scrolling functionality in nested submenus.\n\nThis story specifically tests the fix for nested menu scrolling:\n- First level menu with many items\n- Nested submenu with a long list that exceeds screen height\n- Verifies scroll arrows appear correctly\n- Verifies scrolling works properly in nested menus\n- Tests height constraints are properly applied\n\nExpected behavior:\n- Nested submenu should show scroll arrows when content exceeds available height\n- Users should be able to scroll through all items in the nested menu\n- Menu should not overflow beyond screen boundaries\n- Scroll arrows should appear/disappear based on scroll position\n\nThis story validates the fix for nested menu scrolling issues.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  // Generate a long list of items for testing scrolling\n  const longListItems = Array.from({ length: 30 }, (_, i) => ({\n    id: `item-${i + 1}`,\n    label: `Menu Item ${i + 1}`,\n  }))\n\n  return (\n    <div className=\"flex items-center justify-center\">\n      <Dropdown>\n        <Dropdown.Trigger>\n          <Dropdown.Value>Menu with long nested submenu</Dropdown.Value>\n        </Dropdown.Trigger>\n        <Dropdown.Content>\n          <Dropdown.Item>\n            <Dropdown.Value>Cut</Dropdown.Value>\n          </Dropdown.Item>\n          <Dropdown.Item>\n            <Dropdown.Value>Copy</Dropdown.Value>\n          </Dropdown.Item>\n          <Dropdown.Item>\n            <Dropdown.Value>Paste</Dropdown.Value>\n          </Dropdown.Item>\n          <Dropdown.Divider />\n\n          {/* Nested submenu with long list - this should scroll */}\n          <Dropdown>\n            <Dropdown.SubTrigger>\n              <Dropdown.Value>Long List</Dropdown.Value>\n            </Dropdown.SubTrigger>\n            <Dropdown.Content>\n              <Dropdown.Label>Scrollable Items</Dropdown.Label>\n              {longListItems.map((item) => (\n                <Dropdown.Item key={item.id}>\n                  <Dropdown.Value>{item.label}</Dropdown.Value>\n                </Dropdown.Item>\n              ))}\n            </Dropdown.Content>\n          </Dropdown>\n\n          {/* Another nested submenu with long list for comparison */}\n          <Dropdown>\n            <Dropdown.SubTrigger>\n              <Dropdown.Value>Another Long List</Dropdown.Value>\n            </Dropdown.SubTrigger>\n            <Dropdown.Content>\n              <Dropdown.Label>Another Scrollable List</Dropdown.Label>\n              {longListItems.slice(0, 25).map((item) => (\n                <Dropdown.Item key={item.id}>\n                  <Dropdown.Value>{item.label}</Dropdown.Value>\n                </Dropdown.Item>\n              ))}\n            </Dropdown.Content>\n          </Dropdown>\n\n          <Dropdown.Divider />\n          <Dropdown.Item>\n            <Dropdown.Value>Properties</Dropdown.Value>\n          </Dropdown.Item>\n          <Dropdown.Item variant=\"danger\">\n            <Dropdown.Value>Delete</Dropdown.Value>\n          </Dropdown.Item>\n        </Dropdown.Content>\n      </Dropdown>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--light",
      "name": "Light",
      "exportName": "Light",
      "description": "Dropdown component in light variant.",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\n\nexport default function App() {\n\n  return (\n    <Dropdown variant=\"light\">\n      <Dropdown.Trigger>\n        <Dropdown.Value>Click to open menu (light mode)</Dropdown.Value>\n      </Dropdown.Trigger>\n      <Dropdown.Content>\n        <Dropdown.Item>\n          <Dropdown.Value>Copy</Dropdown.Value>\n        </Dropdown.Item>\n        <Dropdown.Item>\n          <Dropdown.Value>Cut</Dropdown.Value>\n        </Dropdown.Item>\n      </Dropdown.Content>\n      <Dropdown.Divider />\n      <Dropdown.Item variant=\"danger\">\n        <Dropdown.Value>Delete</Dropdown.Value>\n      </Dropdown.Item>\n    </Dropdown>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--with-trigger-ref",
      "name": "With Trigger Ref",
      "exportName": "WithTriggerRef",
      "description": "Using triggerRef to bind dropdown to an external element.\n\nThis is useful when:\n- You need to attach a dropdown to an existing element\n- You want to avoid using Dropdown.Trigger wrapper\n- You need more control over the trigger element",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\nimport { useState, useRef } from \"react\"\n\nexport default function App() {\n\n  const triggerRef = useRef<HTMLButtonElement>(null)\n  const [isOpen, setIsOpen] = useState(false)\n\n  return (\n    <div className=\"flex items-center justify-center gap-8\">\n      <div>\n        <p className=\"text-body-small-strong mb-2\">Using triggerRef</p>\n        <button\n          ref={triggerRef}\n          className=\"bg-secondary-background rounded-lg border border-dashed px-4 py-2\"\n        >\n          Click me (via triggerRef)\n        </button>\n        <Dropdown\n          triggerRef={triggerRef}\n          open={isOpen}\n          onOpenChange={setIsOpen}\n        >\n          <Dropdown.Content>\n            <Dropdown.Label>TriggerRef Menu</Dropdown.Label>\n            <Dropdown.Item>\n              <Dropdown.Value>Option 1</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Item>\n              <Dropdown.Value>Option 2</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Divider />\n            <Dropdown.Item variant=\"danger\">\n              <Dropdown.Value>Delete</Dropdown.Value>\n            </Dropdown.Item>\n          </Dropdown.Content>\n        </Dropdown>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-dropdown--with-trigger-selector",
      "name": "With Trigger Selector",
      "exportName": "WithTriggerSelector",
      "description": "Using triggerSelector (CSS selector) to bind dropdown to an element.\n\nThis is useful when:\n- You cannot access the element via ref (e.g., third-party components)\n- The trigger element is rendered elsewhere in the DOM\n- You prefer a simpler, selector-based approach",
      "source": "import { Dropdown } from \"@choice-ui/dropdown\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [isOpen1, setIsOpen1] = useState(false)\n  const [isOpen2, setIsOpen2] = useState(false)\n  const [isOpen3, setIsOpen3] = useState(false)\n\n  return (\n    <div className=\"flex gap-8\">\n      {/* Using id selector */}\n      <div>\n        <p className=\"text-body-small-strong mb-2\">Using #id selector</p>\n        <button\n          id=\"dropdown-trigger-by-id\"\n          className=\"bg-secondary-background rounded-lg border border-dashed px-4 py-2\"\n        >\n          Click me (id selector)\n        </button>\n        <Dropdown\n          triggerSelector=\"#dropdown-trigger-by-id\"\n          open={isOpen1}\n          onOpenChange={setIsOpen1}\n        >\n          <Dropdown.Content>\n            <Dropdown.Label>ID Selector Menu</Dropdown.Label>\n            <Dropdown.Item>\n              <Dropdown.Value>Action 1</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Item>\n              <Dropdown.Value>Action 2</Dropdown.Value>\n            </Dropdown.Item>\n          </Dropdown.Content>\n        </Dropdown>\n      </div>\n\n      {/* Using class selector */}\n      <div>\n        <p className=\"text-body-small-strong mb-2\">Using .class selector</p>\n        <button className=\"dropdown-trigger-by-class bg-secondary-background rounded-lg border border-dashed px-4 py-2\">\n          Click me (class selector)\n        </button>\n        <Dropdown\n          triggerSelector=\".dropdown-trigger-by-class\"\n          open={isOpen2}\n          onOpenChange={setIsOpen2}\n        >\n          <Dropdown.Content>\n            <Dropdown.Label>Class Selector Menu</Dropdown.Label>\n            <Dropdown.Item>\n              <Dropdown.Value>Option A</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Item>\n              <Dropdown.Value>Option B</Dropdown.Value>\n            </Dropdown.Item>\n          </Dropdown.Content>\n        </Dropdown>\n      </div>\n\n      {/* Using data attribute selector */}\n      <div>\n        <p className=\"text-body-small-strong mb-2\">Using [data-*] selector</p>\n        <button\n          data-dropdown-trigger=\"custom\"\n          className=\"bg-secondary-background rounded-lg border border-dashed px-4 py-2\"\n        >\n          Click me (data-* selector)\n        </button>\n        <Dropdown\n          triggerSelector=\"[data-dropdown-trigger='custom']\"\n          open={isOpen3}\n          onOpenChange={setIsOpen3}\n        >\n          <Dropdown.Content>\n            <Dropdown.Label>Data Attribute Menu</Dropdown.Label>\n            <Dropdown.Item>\n              <Dropdown.Value>Item X</Dropdown.Value>\n            </Dropdown.Item>\n            <Dropdown.Item>\n              <Dropdown.Value>Item Y</Dropdown.Value>\n            </Dropdown.Item>\n          </Dropdown.Content>\n        </Dropdown>\n      </div>\n    </div>\n  )\n\n}"
    }
  ],
  "tags": [
    "upgrade"
  ]
}