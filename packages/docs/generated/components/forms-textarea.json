{
  "slug": "forms/textarea",
  "title": "Textarea",
  "package": {
    "name": "@choice-ui/textarea",
    "version": "0.0.4",
    "description": "A textarea component for multi-line text input with auto-resize and scroll management",
    "dependencies": {
      "@choice-ui/shared": "workspace:*",
      "@choice-ui/scroll-area": "workspace:*",
      "usehooks-ts": "^3.1.0"
    },
    "peerDependencies": {
      "react": ">=18.0.0",
      "react-dom": ">=18.0.0"
    }
  },
  "exports": [
    "Textarea",
    "ResizeHandle",
    "type TextareaProps",
    "type TextareaContentProps",
    "type ResizeHandleProps"
  ],
  "props": [
    {
      "displayName": "TextareaProps",
      "description": "",
      "props": [
        {
          "name": "value",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onChange",
          "type": "((value: string) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "selected",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "className",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "allowNewline",
          "type": "boolean | undefined",
          "required": false,
          "defaultValue": "true",
          "description": "Whether to allow newline characters when pressing Enter."
        },
        {
          "name": "contentRef",
          "type": "RefObject<HTMLDivElement> | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "focusSelection",
          "type": "undefined | \"none\" | \"all\" | \"end\"",
          "required": false,
          "defaultValue": "\"all\"",
          "description": "Focus selection mode."
        },
        {
          "name": "lineHeight",
          "type": "number | undefined",
          "required": false,
          "defaultValue": "16",
          "description": "Line height in pixels for calculating textarea height."
        },
        {
          "name": "maxRows",
          "type": "number | undefined",
          "required": false,
          "defaultValue": "undefined (no maximum)",
          "description": "Maximum number of rows."
        },
        {
          "name": "minRows",
          "type": "number | undefined",
          "required": false,
          "defaultValue": "3",
          "description": "Minimum number of rows."
        },
        {
          "name": "onIsEditingChange",
          "type": "((isEditing: boolean) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "padding",
          "type": "number | undefined",
          "required": false,
          "defaultValue": "4 (py-1)",
          "description": "Padding in pixels (top/bottom) for calculating textarea height."
        },
        {
          "name": "resize",
          "type": "false | \"auto\" | \"handle\" | undefined",
          "required": false,
          "defaultValue": "\"auto\"",
          "description": "Resize behavior mode."
        },
        {
          "name": "scrollRef",
          "type": "RefObject<HTMLDivElement> | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "variant",
          "type": "undefined | \"default\" | \"light\" | \"dark\" | \"reset\"",
          "required": false,
          "defaultValue": "\"default\"",
          "description": "Visual style variant of the textarea."
        }
      ]
    },
    {
      "displayName": "TextareaAutosize",
      "description": "",
      "props": [
        {
          "name": "cacheMeasurements",
          "type": "boolean | undefined",
          "required": false,
          "defaultValue": "true",
          "description": ""
        },
        {
          "name": "debounceMs",
          "type": "number | undefined",
          "required": false,
          "defaultValue": "0",
          "description": "Debounce delay (ms). Defaults to 0 (no debounce)."
        },
        {
          "name": "maxRows",
          "type": "number | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "minRows",
          "type": "number | undefined",
          "required": false,
          "defaultValue": "1",
          "description": ""
        },
        {
          "name": "onHeightChange",
          "type": "((height: number, meta: TextareaHeightChangeMeta) => void) | undefined",
          "required": false,
          "defaultValue": "() => {}",
          "description": ""
        },
        {
          "name": "style",
          "type": "Style | undefined",
          "required": false,
          "description": ""
        }
      ]
    }
  ],
  "stories": [
    {
      "id": "forms-textarea--default",
      "name": "Default",
      "exportName": "Default",
      "description": "Default: Basic textarea with auto-resize behavior and default styling.\n\nFeatures:\n- Auto-sizing based on content\n- Default visual styling\n- Basic placeholder text",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\n\nexport default function App() {\n\n  return (\n    <Textarea\n      placeholder=\"Enter your text here...\"\n      className=\"w-64\"\n    />\n  )\n\n}"
    },
    {
      "id": "forms-textarea--with-value",
      "name": "With Value",
      "exportName": "WithValue",
      "description": "Controlled: Demonstrates controlled textarea with state management.\n\nFeatures:\n- Controlled input with React state\n- Real-time value updates\n- Programmatic value control\n\nBest Practices:\n- Use controlled mode when you need to validate, format, or sync with other components\n- Always provide an onChange handler for controlled inputs",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"This is a textarea with some initial text content.\")\n  return (\n    <Textarea\n      value={value}\n      onChange={setValue}\n      placeholder=\"Enter your text here...\"\n      className=\"w-64\"\n    />\n  )\n\n}"
    },
    {
      "id": "forms-textarea--variants",
      "name": "Variants",
      "exportName": "Variants",
      "description": "Variants: Demonstrates different visual variants of the textarea component.\n\nFeatures:\n- default: Follows the page theme dynamically (light/dark mode)\n- light: Fixed light appearance regardless of theme\n- dark: Fixed dark appearance regardless of theme\n- reset: Removes variant styling, no variant settings applied\n\nBest Practices:\n- Use default variant for inputs that adapt to the current theme\n- Use light/dark variants when you need fixed appearance\n- Use reset variant to remove all variant-specific styling",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [disabled, setDisabled] = useState(false)\n  return (\n    <div className=\"flex flex-col gap-2\">\n      <Checkbox\n        value={disabled}\n        onChange={(value) => setDisabled(value)}\n      >\n        Disabled\n      </Checkbox>\n      <div className=\"flex flex-wrap gap-4\">\n        <div className=\"bg-default-background rounded-lg border p-4\">\n          <Textarea\n            disabled={disabled}\n            placeholder=\"Default variant - follows theme...\"\n          />\n        </div>\n        <div className=\"rounded-lg border bg-white p-4\">\n          <Textarea\n            disabled={disabled}\n            variant=\"light\"\n            placeholder=\"Light variant - fixed light...\"\n          />\n        </div>\n        <div className=\"rounded-lg border bg-gray-800 p-4\">\n          <Textarea\n            disabled={disabled}\n            variant=\"dark\"\n            placeholder=\"Dark variant - fixed dark...\"\n          />\n        </div>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "forms-textarea--selected",
      "name": "Selected",
      "exportName": "Selected",
      "description": "Selected State: Textarea in selected/focused state with visual emphasis.\n\nFeatures:\n- Visual indication of selection/focus\n- Enhanced border styling\n- Clear state differentiation\n\nBest Practices:\n- Use to highlight important or active textareas in complex forms\n- Combine with focus management for better UX",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\n\nexport default function App() {\n\n  return (\n    <Textarea\n      selected={true}\n      value=\"This textarea is in selected state\"\n      className=\"w-64\"\n    />\n  )\n\n}"
    },
    {
      "id": "forms-textarea--disabled",
      "name": "Disabled",
      "exportName": "Disabled",
      "description": "Disabled State: Non-interactive textarea for display-only content.\n\nFeatures:\n- Visual disabled styling\n- Prevents user interaction\n- Maintains content visibility\n\nAccessibility:\n- Properly communicated to screen readers\n- Skipped in keyboard navigation",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\n\nexport default function App() {\n\n  return (\n    <Textarea\n      disabled={true}\n      value=\"This textarea is disabled\"\n      className=\"w-64\"\n    />\n  )\n\n}"
    },
    {
      "id": "forms-textarea--read-only",
      "name": "Read Only",
      "exportName": "ReadOnly",
      "description": "Read-Only: Interactive but non-editable textarea for content display.\n\nFeatures:\n- Focusable but not editable\n- Supports text selection and copying\n- Visual indication of read-only state\n\nBest Practices:\n- Use when users need to view/copy content but not edit it\n- Prefer over disabled when selection/copying is needed",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\n\nexport default function App() {\n\n  return (\n    <Textarea\n      readOnly={true}\n      value=\"This textarea is read-only\"\n      className=\"w-64\"\n    />\n  )\n\n}"
    },
    {
      "id": "forms-textarea--with-min-max-rows",
      "name": "With Min Max Rows",
      "exportName": "WithMinMaxRows",
      "description": "Height Constraints: Textarea with minimum and maximum row limits.\n\nFeatures:\n- Controlled height boundaries with minRows and maxRows\n- Auto-sizing within defined limits\n- Scrolling when content exceeds maxRows\n\nBest Practices:\n- Set minRows to ensure adequate initial space\n- Set maxRows to prevent excessive height in layouts\n- Consider content length when setting limits",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\n\nexport default function App() {\n\n  return (\n    <Textarea\n      minRows={2}\n      maxRows={8}\n      placeholder=\"This textarea has minRows=2 and maxRows=8\"\n      className=\"w-64\"\n    />\n  )\n\n}"
    },
    {
      "id": "forms-textarea--without-autosize",
      "name": "Without Autosize",
      "exportName": "WithoutAutosize",
      "description": "Fixed Size: Textarea with fixed height that doesn't auto-resize.\n\nFeatures:\n- Fixed height based on rows prop\n- No automatic resizing\n- Scrollable content when overflow occurs\n\nBest Practices:\n- Use in grid layouts or when consistent height is required\n- Ensure sufficient rows for expected content\n- Consider UX impact of fixed sizing",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\n\nexport default function App() {\n\n  return (\n    <Textarea\n      className=\"w-64\"\n      resize={false}\n      rows={4}\n      placeholder=\"This textarea does not auto-resize\"\n    />\n  )\n\n}"
    },
    {
      "id": "forms-textarea--long-content",
      "name": "Long Content",
      "exportName": "LongContent",
      "description": "Scrollable Content: Textarea with long content demonstrating scroll behavior.\n\nFeatures:\n- Custom scrollbar styling via ScrollArea\n- Smooth scrolling experience\n- Height limits with maxRows causing overflow\n\nBest Practices:\n- Set appropriate maxRows for your layout\n- Consider character limits for very long content\n- Test scrolling behavior across different devices",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n      const longContent = `This is a textarea with a lot of content to demonstrate scrolling behavior.\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n  Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n  Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.\n  Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.`\n      const [value, setValue] = useState(longContent)\n      return (\n        <Textarea\n          value={value}\n          onChange={setValue}\n          placeholder=\"This textarea has a lot of content to demonstrate scrolling behavior.\"\n          className=\"w-64\"\n          maxRows={6}\n        />\n      )\n\n}"
    },
    {
      "id": "forms-textarea--interactive",
      "name": "Interactive",
      "exportName": "Interactive",
      "description": "Interactive Example: Textarea with real-time feedback and editing state tracking.\n\nFeatures:\n- Real-time character counting\n- Editing state detection\n- Live feedback display\n\nBest Practices:\n- Use onIsEditingChange for form validation timing\n- Display character counts for limited-length fields\n- Provide immediate feedback to users",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n  const [isEditing, setIsEditing] = useState(false)\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <Textarea\n        value={value}\n        onChange={setValue}\n        onIsEditingChange={setIsEditing}\n        placeholder=\"Type something...\"\n        className=\"w-64\"\n      />\n      <div className=\"text-secondary-foreground text-body-small\">\n        <p>Character count: {value.length}</p>\n        <p>Is editing: {isEditing ? \"Yes\" : \"No\"}</p>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "forms-textarea--resize-handle",
      "name": "Resize Handle",
      "exportName": "ResizeHandle",
      "description": "Manual Resize: Textarea with drag handle for manual height adjustment.\n\nFeatures:\n- Draggable resize handle in bottom-right corner\n- Manual height control with mouse/touch\n- Height constraints respected during resize\n- Visual feedback during drag operation\n\nBest Practices:\n- Set appropriate minRows/maxRows for your layout\n- Use when users need precise control over textarea height\n- Consider mobile accessibility for touch interactions\n- Provide visual cues for the resize functionality\n\nAccessibility:\n- Resize handle is keyboard accessible\n- Clear visual indication of resize capability\n- Maintains focus during resize operations",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\n    \"This textarea can be resized by dragging the handle in the bottom right corner. The height is constrained by minRows and maxRows.\",\n  )\n\n  return (\n    <Textarea\n      className=\"w-64\"\n      resize=\"handle\"\n      minRows={3}\n      maxRows={10}\n      value={value}\n      onChange={setValue}\n      placeholder=\"Drag the resize handle to adjust height...\"\n    />\n  )\n\n}"
    },
    {
      "id": "forms-textarea--simple-usage",
      "name": "Simple Usage",
      "exportName": "SimpleUsage",
      "description": "Simple Usage: Demonstrates the default simple usage pattern.\n\nFeatures:\n- Direct value and onChange props\n- Auto-sizing with maxRows constraint\n- Clean, minimal API",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex flex-col gap-2\">\n        <Label>Simple Usage Pattern</Label>\n        <Textarea\n          value={value}\n          onChange={setValue}\n          placeholder=\"This textarea has a lot of content to demonstrate scrolling behavior.\"\n          className=\"w-64\"\n          maxRows={6}\n        />\n      </div>\n      <div className=\"text-secondary-foreground\">Character count: {value.length}</div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "forms-textarea--compound-usage",
      "name": "Compound Usage",
      "exportName": "CompoundUsage",
      "description": "Compound Usage: Demonstrates the compound component pattern with Textarea.Content.\n\nFeatures:\n- Custom content component\n- Additional className on content\n- Full control over TextareaAutosize props",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex flex-col gap-2\">\n        <Label>Compound Component Pattern</Label>\n        <Textarea\n          value={value}\n          onChange={setValue}\n          placeholder=\"This textarea has a lot of content to demonstrate scrolling behavior.\"\n          className=\"w-64\"\n          maxRows={6}\n        >\n          <Textarea.Content className=\"font-mono\" />\n        </Textarea>\n      </div>\n      <div className=\"text-secondary-foreground\">\n        Using Textarea.Content with custom font-mono class\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "forms-textarea--focus-selection-modes",
      "name": "Focus Selection Modes",
      "exportName": "FocusSelectionModes",
      "description": "Focus Selection Modes: Demonstrates different focus selection behaviors.\n\nFeatures:\n- \"all\": Selects all text on focus (default)\n- \"end\": Moves cursor to end of text\n- \"none\": No selection change",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [value1, setValue1] = useState(\"This text will be fully selected on focus\")\n  const [value2, setValue2] = useState(\"Cursor will move to the end on focus\")\n  const [value3, setValue3] = useState(\"No selection change on focus\")\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col gap-2\">\n        <Label>Select All (Default)</Label>\n        <Textarea\n          value={value1}\n          onChange={setValue1}\n          focusSelection=\"all\"\n          placeholder=\"Click to select all text...\"\n          className=\"w-64\"\n          minRows={2}\n          maxRows={4}\n        />\n        <p className=\"text-secondary-foreground\">\n          focusSelection=&quot;all&quot; - Selects all text when focused\n        </p>\n      </div>\n\n      <div className=\"flex flex-col gap-2\">\n        <Label>Move to End</Label>\n        <Textarea\n          value={value2}\n          onChange={setValue2}\n          focusSelection=\"end\"\n          placeholder=\"Click to move cursor to end...\"\n          className=\"w-64\"\n          minRows={2}\n          maxRows={4}\n        />\n        <p className=\"text-secondary-foreground\">\n          focusSelection=&quot;end&quot; - Moves cursor to end of text\n        </p>\n      </div>\n\n      <div className=\"flex flex-col gap-2\">\n        <Label>No Selection</Label>\n        <Textarea\n          value={value3}\n          onChange={setValue3}\n          focusSelection=\"none\"\n          placeholder=\"Click anywhere to focus...\"\n          className=\"w-64\"\n          minRows={2}\n          maxRows={4}\n        />\n        <p className=\"text-secondary-foreground\">\n          focusSelection=&quot;none&quot; - Maintains cursor position\n        </p>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "forms-textarea--no-newline-mode",
      "name": "No Newline Mode",
      "exportName": "NoNewlineMode",
      "description": "No Newline Mode: Demonstrates textarea that prevents newline on Enter.\n\nFeatures:\n- Prevents Enter key from creating new lines\n- Useful for single-line input scenarios\n- Still allows text wrapping visually",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex flex-col gap-2\">\n        <Label>No Newline Allowed</Label>\n        <Textarea\n          value={value}\n          onChange={setValue}\n          allowNewline={false}\n          placeholder=\"Press Enter - it won't create a new line...\"\n          className=\"w-64\"\n          minRows={2}\n          maxRows={4}\n        />\n        <p className=\"text-secondary-foreground\">allowNewline=false - Enter key is disabled</p>\n      </div>\n\n      <div className=\"flex flex-col gap-2\">\n        <Label>Normal Mode (for comparison)</Label>\n        <Textarea\n          value={value}\n          onChange={setValue}\n          allowNewline={true}\n          placeholder=\"Press Enter to create new lines...\"\n          className=\"w-64\"\n          minRows={2}\n          maxRows={4}\n        />\n        <p className=\"text-secondary-foreground\">\n          allowNewline=true (default) - Enter key works normally\n        </p>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "forms-textarea--custom-line-height",
      "name": "Custom Line Height",
      "exportName": "CustomLineHeight",
      "description": "Custom Line Height: Demonstrates the customizable lineHeight prop.\n\nFeatures:\n- Adjustable line height for different text densities\n- Automatic height calculation based on custom line height\n- Works with minRows and maxRows",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\n    \"Default line height (16px)\\nThis is line 2\\nThis is line 3\\nThis is line 4\",\n  )\n  const [size, setSize] = useState<\"default\" | \"large\">(\"default\")\n\n  return (\n    <div className=\"space-y-6\">\n      <Switch\n        value={size === \"large\"}\n        onChange={() => setSize(size === \"large\" ? \"default\" : \"large\")}\n      >\n        <Switch.Label>Size</Switch.Label>\n      </Switch>\n\n      <Textarea\n        value={value}\n        onChange={setValue}\n        minRows={3}\n        maxRows={5}\n        className=\"w-64\"\n        placeholder=\"Default line height...\"\n        lineHeight={size === \"large\" ? 22 : 16}\n      >\n        <Textarea.Content className={size === \"large\" ? \"text-body-large\" : \"text-body-medium\"} />\n      </Textarea>\n    </div>\n  )\n\n}"
    },
    {
      "id": "forms-textarea--in-popover",
      "name": "In Popover",
      "exportName": "InPopover",
      "description": "In Popover: Demonstrates textarea working correctly in a Popover.\n\nThis story tests the fix for the auto-height calculation bug that occurred\nwhen textarea is rendered inside a popover or dialog. The component now\nproperly handles initialization when the container is initially hidden.\n\nFeatures:\n- Correct height calculation when popover opens\n- IntersectionObserver for visibility detection\n- Automatic retry mechanism for sizing data\n\nTechnical Implementation:\n- Uses IntersectionObserver to detect when textarea becomes visible\n- Implements requestAnimationFrame retry for sizing data\n- Checks element connectivity and visibility before calculating height",
      "source": "import { Textarea } from \"@choice-ui/textarea\"\nimport { useState } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n  const [open, setOpen] = useState(false)\n\n  return (\n    <div className=\"flex items-center justify-center p-20\">\n      <Popover\n        open={open}\n        onOpenChange={setOpen}\n      >\n        <Popover.Trigger>\n          <Button>Open Popover with Textarea</Button>\n        </Popover.Trigger>\n        <Popover.Header title=\"Add a comment\" />\n        <Popover.Content className=\"space-y-3 p-4\">\n          <div className=\"text-secondary-foreground\">\n            Type your comment below. The textarea should auto-size correctly even though it starts\n            hidden inside a popover.\n          </div>\n          <Textarea\n            value={value}\n            onChange={setValue}\n            placeholder=\"Type your comment here...\"\n            minRows={3}\n            maxRows={10}\n            className=\"w-full\"\n          />\n          <div className=\"text-secondary-foreground\">Characters: {value.length}</div>\n        </Popover.Content>\n      </Popover>\n    </div>\n  )\n\n}"
    }
  ],
  "tags": [
    "new"
  ]
}