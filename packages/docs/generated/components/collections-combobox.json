{
  "slug": "collections/combobox",
  "title": "Combobox",
  "package": {
    "name": "@choice-ui/combobox",
    "version": "0.0.6",
    "description": "A combobox component combining input field with dropdown menu for filtering and selecting options",
    "dependencies": {
      "@choice-ui/shared": "workspace:*",
      "@choice-ui/icon-button": "workspace:*",
      "@choiceform/icons-react": "^1.3.8",
      "@choice-ui/menus": "workspace:*",
      "@floating-ui/react": "0.27.15",
      "usehooks-ts": "^3.1.0"
    },
    "peerDependencies": {
      "react": ">=18.0.0",
      "react-dom": ">=18.0.0"
    }
  },
  "exports": [
    "type ComboboxRef",
    "type ComboboxProps",
    "Combobox",
    "type ComboboxTriggerProps",
    "ComboboxTrigger"
  ],
  "props": [
    {
      "displayName": "Combobox",
      "description": "",
      "props": [
        {
          "name": "autoSelection",
          "type": "boolean | undefined",
          "required": false,
          "defaultValue": "true",
          "description": ""
        },
        {
          "name": "disabled",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "focusManagerProps",
          "type": "Partial<Omit<FloatingFocusManagerProps, \"children\" | \"context\">> | undefined",
          "required": false,
          "defaultValue": "{ returnFocus: true, modal: false }",
          "description": ""
        },
        {
          "name": "matchTriggerWidth",
          "type": "boolean | undefined",
          "required": false,
          "defaultValue": "true",
          "description": ""
        },
        {
          "name": "onBlur",
          "type": "((value: string) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onChange",
          "type": "((value: string) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onOpenChange",
          "type": "((open: boolean, trigger?: \"input\" | \"click\" | \"focus\" | undefined) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "open",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "placement",
          "type": "undefined | \"top\" | \"right\" | \"bottom\" | \"left\" | \"top-start\" | \"top-end\" | \"right-start\" | \"right-end\" | \"bottom-start\" | \"bottom-end\" | \"left-start\" | \"left-end\"",
          "required": false,
          "defaultValue": "\"bottom-start\"",
          "description": ""
        },
        {
          "name": "portalId",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "position",
          "type": "{ x: number; y: number; } | null | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "readOnly",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "root",
          "type": "HTMLElement | null | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "trigger",
          "type": "undefined | \"input\" | \"coordinate\"",
          "required": false,
          "defaultValue": "\"input\"",
          "description": "Trigger type: \"input\" for input mode, \"coordinate\" for coordinate mode"
        },
        {
          "name": "value",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "variant",
          "type": "undefined | \"default\" | \"light\" | \"reset\"",
          "required": false,
          "defaultValue": "\"default\"",
          "description": ""
        }
      ]
    },
    {
      "displayName": "ComboboxTrigger",
      "description": "",
      "props": [
        {
          "name": "size",
          "type": "undefined | \"default\" | \"large\"",
          "required": false,
          "description": ""
        },
        {
          "name": "onChange",
          "type": "((value: string) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "disabled",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "placeholder",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "value",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onClick",
          "type": "(() => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "active",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "i18n",
          "type": "{ clear: string; placeholder: string; } | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "noMatch",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "prefixElement",
          "type": "ReactNode",
          "required": false,
          "description": ""
        },
        {
          "name": "showClear",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "suffixElement",
          "type": "ReactNode",
          "required": false,
          "description": ""
        },
        {
          "name": "variant",
          "type": "undefined | \"default\" | \"dark\" | \"reset\"",
          "required": false,
          "description": ""
        },
        {
          "name": "ref",
          "type": "((instance: HTMLInputElement | null) => void) | RefObject<HTMLInputElement> | null | undefined",
          "required": false,
          "description": ""
        }
      ]
    }
  ],
  "stories": [
    {
      "id": "collections-combobox--basic",
      "name": "Basic",
      "exportName": "Basic",
      "description": "Basic: The simplest usage of Combobox.\n\nFeatures:\n- Searchable input with filtering\n- Type to filter the list\n- Use arrow keys to navigate\n- Press Enter or click to select\n- Selected value appears in the input\n- Multiple trigger types (click, focus, input)",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\nimport { useState, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n  const [triggerType, setTriggerType] = useState<\"click\" | \"focus\" | \"input\">(\"input\")\n\n  const itemsToShow = useMemo(() => {\n    if (triggerType === \"click\") {\n      // ÁÇπÂáªtriggerÊó∂ÊòæÁ§∫ÊâÄÊúâitems\n      return fruits\n    }\n    if (!value.trim()) {\n      return []\n    }\n    // ËæìÂÖ•ÊàñfocusÊó∂ÊòæÁ§∫ËøáÊª§ÂêéÁöÑitems\n    return fruits.filter((fruit) => fruit.toLowerCase().startsWith(value.toLowerCase()))\n  }, [value, triggerType])\n\n  const handleChange = useEventCallback((newValue: string) => {\n    setValue(newValue)\n    setTriggerType(\"input\")\n  })\n\n  const handleOpenChange = useEventCallback(\n    (open: boolean, trigger: \"click\" | \"focus\" | \"input\" = \"input\") => {\n      if (open) {\n        setTriggerType(trigger)\n      }\n    },\n  )\n\n  return (\n    <div className=\"w-64\">\n      <Combobox\n        value={value}\n        onChange={handleChange}\n        onOpenChange={handleOpenChange}\n      >\n        <Combobox.Trigger placeholder=\"Search fruits...\" />\n        {itemsToShow.length > 0 && (\n          <Combobox.Content>\n            <>\n              <Combobox.Label>Fruits</Combobox.Label>\n              {itemsToShow.map((fruit) => (\n                <Combobox.Item\n                  key={fruit}\n                  onClick={() => setValue(fruit)}\n                >\n                  <Combobox.Value>{fruit}</Combobox.Value>\n                </Combobox.Item>\n              ))}\n            </>\n          </Combobox.Content>\n        )}\n      </Combobox>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-combobox--disabled",
      "name": "Disabled",
      "exportName": "Disabled",
      "description": "Disabled: Demonstrates disabled Combobox functionality.\n\nFeatures:\n- Input and interactions are disabled\n- Visual feedback for unavailable state\n- Selected value remains visible\n- Useful for conditional availability",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\n\nexport default function App() {\n\n  return (\n    <div className=\"w-64\">\n      <Combobox disabled>\n        <Combobox.Trigger\n          placeholder=\"Disabled combobox...\"\n          value=\"Apple\"\n        />\n        <Combobox.Content>\n          <Combobox.Item>\n            <Combobox.Value>Apple</Combobox.Value>\n          </Combobox.Item>\n        </Combobox.Content>\n      </Combobox>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-combobox--large-size",
      "name": "Large Size",
      "exportName": "LargeSize",
      "description": "LargeSize: Demonstrates Combobox with large size variant.\n\nFeatures:\n- Increased padding and font size\n- Large trigger and menu items\n- Better for touch interfaces\n- Consistent sizing across components",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\nimport { useState, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n\n  const filteredFruits = useMemo(() => {\n    if (!value.trim()) return []\n    return fruits.filter((fruit) => fruit.toLowerCase().startsWith(value.toLowerCase()))\n  }, [value])\n\n  return (\n    <div className=\"w-80\">\n      <Combobox\n        value={value}\n        onChange={setValue}\n      >\n        <Combobox.Trigger\n          placeholder=\"Search fruits...\"\n          size=\"large\"\n        />\n        <Combobox.Content>\n          <Combobox.Label>Fruits</Combobox.Label>\n          {filteredFruits.map((fruit) => (\n            <Combobox.Item\n              key={fruit}\n              size=\"large\"\n              onClick={() => setValue(fruit)}\n            >\n              <Combobox.Value>{fruit}</Combobox.Value>\n            </Combobox.Item>\n          ))}\n        </Combobox.Content>\n      </Combobox>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-combobox--light-variant",
      "name": "Light Variant",
      "exportName": "LightVariant",
      "description": "LightVariant: Demonstrates Combobox with light variant styling.\n\nFeatures:\n- Light variant visual style\n- Standard search and selection functionality\n- Multiple trigger types support\n- Consistent with light theme",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\nimport { useState, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n  const [triggerType, setTriggerType] = useState<\"click\" | \"focus\" | \"input\">(\"input\")\n\n  const itemsToShow = useMemo(() => {\n    if (triggerType === \"click\") {\n      // ÁÇπÂáªtriggerÊó∂ÊòæÁ§∫ÊâÄÊúâitems\n      return fruits\n    }\n    if (!value.trim()) {\n      return []\n    }\n    // ËæìÂÖ•ÊàñfocusÊó∂ÊòæÁ§∫ËøáÊª§ÂêéÁöÑitems\n    return fruits.filter((fruit) => fruit.toLowerCase().startsWith(value.toLowerCase()))\n  }, [value, triggerType])\n\n  const handleChange = useEventCallback((newValue: string) => {\n    setValue(newValue)\n    setTriggerType(\"input\")\n  })\n\n  const handleOpenChange = useEventCallback(\n    (open: boolean, trigger: \"click\" | \"focus\" | \"input\" = \"input\") => {\n      if (open) {\n        setTriggerType(trigger)\n      }\n    },\n  )\n\n  return (\n    <div className=\"w-64\">\n      <Combobox\n        value={value}\n        onChange={handleChange}\n        onOpenChange={handleOpenChange}\n        variant=\"light\"\n      >\n        <Combobox.Trigger placeholder=\"Search fruits...\" />\n        {itemsToShow.length > 0 && (\n          <Combobox.Content>\n            <>\n              <Combobox.Label>Fruits</Combobox.Label>\n              {itemsToShow.map((fruit) => (\n                <Combobox.Item\n                  key={fruit}\n                  onClick={() => setValue(fruit)}\n                >\n                  <Combobox.Value>{fruit}</Combobox.Value>\n                </Combobox.Item>\n              ))}\n            </>\n          </Combobox.Content>\n        )}\n      </Combobox>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-combobox--long-list",
      "name": "Long List",
      "exportName": "LongList",
      "description": "LongList: Demonstrates Combobox with many options and scrolling behavior.\n\nFeatures:\n- Long list of options (100 items)\n- Efficient filtering\n- Scroll behavior in dropdown\n- Empty state when no matches found\n- Performance optimization for large lists\n\nUse cases:\n- City/region selectors\n- Long option lists\n- Large dataset selection",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\nimport { useState, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n\n  const countries = useMemo(\n    () => Array.from({ length: 100 }, (_, index) => `Option ${index + 1}`),\n    [],\n  )\n\n  const filteredCountries = useMemo(() => {\n    if (!value.trim()) return []\n    return countries\n      .filter((country) => country.toLowerCase().startsWith(value.toLowerCase()))\n      .slice(0, 50) // Limit results for performance\n  }, [value, countries])\n\n  return (\n    <div className=\"w-64\">\n      <Combobox\n        value={value}\n        onChange={setValue}\n      >\n        <Combobox.Trigger placeholder=\"Type Option...\" />\n        <Combobox.Content>\n          <Combobox.Label>\n            Countries ({filteredCountries.length} {!value ? \"shown\" : \"found\"})\n          </Combobox.Label>\n          {filteredCountries.map((country, index) => (\n            <Combobox.Item\n              key={`${country}-${index}`}\n              onClick={() => setValue(country)}\n            >\n              <Combobox.Value>{country}</Combobox.Value>\n            </Combobox.Item>\n          ))}\n          {filteredCountries.length === 0 && value && (\n            <div className=\"p-4 text-center text-white/50\">\n              No countries found for &ldquo;{value}&rdquo;\n            </div>\n          )}\n        </Combobox.Content>\n      </Combobox>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-combobox--clearable",
      "name": "Clearable",
      "exportName": "Clearable",
      "description": "Clearable: Demonstrates Combobox with clearable input.\n\nFeatures:\n- Shows clear button when value is not empty\n- Clear button is hidden when value is empty\n- Quick value reset functionality\n- Better user experience for search scenarios",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\nimport { useState, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n\n  const filteredFruits = useMemo(() => {\n    if (!value.trim()) return []\n    return fruits.filter((fruit) => fruit.toLowerCase().startsWith(value.toLowerCase()))\n  }, [value])\n\n  return (\n    <div className=\"w-64\">\n      <Combobox\n        value={value}\n        onChange={setValue}\n      >\n        <Combobox.Trigger\n          showClear\n          placeholder=\"Search fruits...\"\n        />\n        {filteredFruits.length > 0 && (\n          <Combobox.Content>\n            <>\n              <Combobox.Label>Fruits</Combobox.Label>\n              {filteredFruits.map((fruit) => (\n                <Combobox.Item\n                  key={fruit}\n                  onClick={() => setValue(fruit)}\n                >\n                  <Combobox.Value>{fruit}</Combobox.Value>\n                </Combobox.Item>\n              ))}\n            </>\n          </Combobox.Content>\n        )}\n      </Combobox>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-combobox--custom-width",
      "name": "Custom Width",
      "exportName": "CustomWidth",
      "description": "CustomWidth: Demonstrates Combobox with custom width that doesn't match trigger.\n\nFeatures:\n- Dropdown width independent of trigger\n- Custom width via className\n- Flexible layout options\n- Useful for compact triggers with wider options\n\nUse cases:\n- Space-constrained layouts\n- Wide option content\n- Custom design requirements",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\nimport { useState, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n\n  const filteredFruits = useMemo(() => {\n    if (!value.trim()) return []\n    return fruits.filter((fruit) => fruit.toLowerCase().startsWith(value.toLowerCase()))\n  }, [value])\n\n  return (\n    <div className=\"w-48\">\n      <Combobox\n        value={value}\n        onChange={setValue}\n        matchTriggerWidth={false}\n      >\n        <Combobox.Trigger placeholder=\"Fruit...\" />\n        <Combobox.Content className=\"w-80\">\n          <Combobox.Label>Available Fruits (Custom Width)</Combobox.Label>\n          {filteredFruits.map((fruit) => (\n            <Combobox.Item\n              key={fruit}\n              onClick={() => setValue(fruit)}\n            >\n              <Combobox.Value>{fruit}</Combobox.Value>\n            </Combobox.Item>\n          ))}\n        </Combobox.Content>\n      </Combobox>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-combobox--controlled",
      "name": "Controlled",
      "exportName": "Controlled",
      "description": "Controlled: Demonstrates controlled Combobox with external state management.\n\nFeatures:\n- Value is controlled by parent component\n- Separate search value and selected value\n- Demonstrates integration with forms\n- External state synchronization\n\nUse cases:\n- Form integration\n- Complex state management\n- Multi-step workflows",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\nimport { useState, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [selectedFruit, setSelectedFruit] = useState(\"Apple\")\n  const [searchValue, setSearchValue] = useState(\"\")\n\n  const filteredFruits = useMemo(() => {\n    if (!searchValue.trim()) return []\n    return fruits.filter((fruit) => fruit.toLowerCase().startsWith(searchValue.toLowerCase()))\n  }, [searchValue])\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"w-64\">\n        <Combobox\n          value={searchValue}\n          onChange={setSearchValue}\n        >\n          <Combobox.Trigger placeholder=\"Search fruits...\" />\n          <Combobox.Content>\n            {filteredFruits.length > 0 ? (\n              <>\n                <Combobox.Label>Available Fruits</Combobox.Label>\n                {filteredFruits.map((fruit) => (\n                  <Combobox.Item\n                    key={fruit}\n                    onClick={() => {\n                      setSelectedFruit(fruit)\n                      setSearchValue(fruit)\n                    }}\n                  >\n                    <Combobox.Value>{fruit}</Combobox.Value>\n                  </Combobox.Item>\n                ))}\n              </>\n            ) : (\n              <div className=\"p-4 text-center text-white/50\">No matches found</div>\n            )}\n          </Combobox.Content>\n        </Combobox>\n      </div>\n\n      <div className=\"text-secondary-foreground\">\n        <div>\n          Selected fruit: <strong>{selectedFruit}</strong>\n        </div>\n        <div>\n          Search value: <strong>{searchValue || \"(empty)\"}</strong>\n        </div>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-combobox--coordinate-mode",
      "name": "Coordinate Mode",
      "exportName": "CoordinateMode",
      "description": "CoordinateMode: Demonstrates Combobox in coordinate mode positioned at specific coordinates.\n\nFeatures:\n- No trigger element required\n- Positioned at specific x/y coordinates\n- Auto-selection support\n- Perfect for mentions and autocomplete\n- User search and filtering\n\nUse cases:\n- Context menus at cursor position\n- Mention dropdowns in editors\n- Custom positioned autocomplete\n- Rich text editor integrations",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\nimport { useState, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [isOpen, setIsOpen] = useState(false)\n  const [position, setPosition] = useState<{ x: number; y: number } | null>(null)\n  const [query, setQuery] = useState(\"\")\n\n  const users = useMemo(\n    () => [\n      {\n        id: \"1\",\n        name: \"John Doe\",\n        username: \"johndoe\",\n        avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=john\",\n      },\n      {\n        id: \"2\",\n        name: \"Jane Smith\",\n        username: \"janesmith\",\n        avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=jane\",\n      },\n      {\n        id: \"3\",\n        name: \"Bob Wilson\",\n        username: \"bobwilson\",\n        avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=bob\",\n      },\n    ],\n    [],\n  )\n\n  const filteredUsers = useMemo(() => {\n    if (!query.trim()) return users\n    return users.filter(\n      (user) =>\n        user.name.toLowerCase().includes(query.toLowerCase()) ||\n        user.username.toLowerCase().includes(query.toLowerCase()),\n    )\n  }, [query, users])\n\n  const handleClick = (event: React.MouseEvent) => {\n    setPosition({\n      x: event.clientX,\n      y: event.clientY,\n    })\n    setQuery(\"\")\n    setIsOpen(true)\n  }\n\n  const handleSelectUser = (user: (typeof users)[0]) => {\n    setQuery(user.name)\n    setIsOpen(false)\n  }\n\n  return (\n    <div className=\"w-80 space-y-4\">\n      <div className=\"rounded-xl border p-4\">\n        <h3 className=\"font-strong mb-2\">üìç Coordinate Mode Combobox</h3>\n        <p className=\"text-secondary-foreground text-body-small\">\n          Click anywhere in the area below to trigger a Combobox at that position. Perfect for\n          mentions, autocomplete, etc.\n        </p>\n      </div>\n\n      <div\n        className=\"bg-secondary-background relative h-64 cursor-pointer rounded-lg border border-dashed p-4\"\n        onMouseDown={handleClick}\n      >\n        <p className=\"text-secondary-foreground text-center\">\n          Click anywhere in this area to show Combobox at mouse position\n        </p>\n\n        {position && (\n          <div\n            className=\"text-secondary-foreground fixed z-10 size-4\"\n            style={{ left: position.x - 8, top: position.y - 8 }}\n          />\n        )}\n      </div>\n\n      {/* Combobox in coordinate mode */}\n      <Combobox\n        trigger=\"coordinate\"\n        position={position}\n        value={query}\n        onChange={setQuery}\n        open={isOpen}\n        onOpenChange={setIsOpen}\n        placement=\"bottom-start\"\n        autoSelection={true}\n      >\n        <Combobox.Content>\n          <Combobox.Label>\n            {query ? `Search results for \"${query}\"` : \"Select User\"}\n          </Combobox.Label>\n          {filteredUsers.length > 0 ? (\n            filteredUsers.map((user) => (\n              <Combobox.Item\n                key={user.id}\n                onClick={() => handleSelectUser(user)}\n              >\n                <img\n                  src={user.avatar}\n                  alt={user.name}\n                  className=\"mr-2 size-4 rounded-full\"\n                />\n                <Combobox.Value>{user.name}</Combobox.Value>\n              </Combobox.Item>\n            ))\n          ) : (\n            <div className=\"p-4 text-center text-white/50\">\n              No users found for &ldquo;{query}&rdquo;\n            </div>\n          )}\n        </Combobox.Content>\n      </Combobox>\n\n      {/* Debug info */}\n      <div className=\"bg-secondary-background text-secondary-foreground rounded-lg p-3 text-xs\">\n        <div>\n          <strong>Query:</strong> &ldquo;{query}&rdquo;\n        </div>\n        <div>\n          <strong>Position:</strong> {position ? `${position.x}, ${position.y}` : \"null\"}\n        </div>\n        <div>\n          <strong>Open:</strong> {isOpen ? \"Yes\" : \"No\"}\n        </div>\n        <div>\n          <strong>Results:</strong> {filteredUsers.length}\n        </div>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-combobox--mentions-with-slate",
      "name": "Mentions With Slate",
      "exportName": "MentionsWithSlate",
      "description": "MentionsWithSlate: Demonstrates Combobox integrated with Slate.js rich text editor for mentions.\n\nFeatures:\n- Type @ to trigger mentions menu\n- Combobox positioned at cursor location\n- Integration with Slate.js editor\n- User selection and insertion\n- Real-time text updates\n- Keyboard navigation support\n- Filtering based on @ query\n\nUse cases:\n- Rich text editors with mentions\n- Comment systems\n- Collaborative editing features\n- Social media style inputs",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\nimport { useState, useCallback, useMemo, useRef } from \"react\"\n\nexport default function App() {\n\n  const [isOpen, setIsOpen] = useState(false)\n  const [position, setPosition] = useState<{ x: number; y: number } | null>(null)\n  const [mentionQuery, setMentionQuery] = useState(\"\")\n  const editorRef = useRef<HTMLDivElement>(null)\n\n  const [enterFilter, setEnterFilter] = useState(true)\n\n  // ÂàõÂª∫ Slate ÁºñËæëÂô®ÂÆû‰æã\n  const editor = useMemo(() => withReact(createEditor()), [])\n\n  // ÂàùÂßãÂÄº\n  const initialValue: Descendant[] = [\n    {\n      type: \"paragraph\",\n      children: [{ text: \"\" }],\n    } as Descendant,\n  ]\n  const [value, setValue] = useState<Descendant[]>(initialValue)\n\n  // Êõ¥Â§öÁî®Êà∑Êï∞ÊçÆÁî®‰∫éÊµãËØïËøáÊª§\n  const allUsers = useMemo(\n    () =>\n      Array.from({ length: 100 }, (_, index) => ({\n        id: index.toString(),\n        name: faker.person.fullName(),\n        username: faker.internet.userName(),\n        role: faker.person.jobTitle(),\n        avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${faker.person.fullName()}`,\n      })),\n    [],\n  )\n\n  // ËøáÊª§Áî®Êà∑ÂàóË°® - Ê®°ÊãüÊ≠£Â∏∏ Combobox ÁöÑËøáÊª§ÈÄªËæë\n  const filteredUsers = useMemo(() => {\n    if (enterFilter) {\n      // Á±ª‰ººÊ≠£Â∏∏Ê®°ÂºèÔºöÂ¶ÇÊûúÊ≤°ÊúâÊü•ËØ¢ÂÜÖÂÆπÔºå‰∏çÊòæÁ§∫‰ªª‰ΩïÈÄâÈ°π\n      if (!mentionQuery.trim()) return []\n\n      return allUsers.filter(\n        (user) =>\n          user.name.toLowerCase().includes(mentionQuery.toLowerCase()) ||\n          user.username.toLowerCase().includes(mentionQuery.toLowerCase()) ||\n          user.role.toLowerCase().includes(mentionQuery.toLowerCase()),\n      )\n    } else {\n      return allUsers\n    }\n  }, [mentionQuery, allUsers, enterFilter])\n\n  // Ëé∑ÂèñÁºñËæëÂô®ÊñáÊú¨ÂÜÖÂÆπ\n  const getEditorText = useCallback(() => {\n    return value.map((n) => Node.string(n)).join(\"\\n\")\n  }, [value])\n\n  // Â§ÑÁêÜ Combobox ÁöÑÊü•ËØ¢ÂèòÂåñÔºà‰ªÖÁî®‰∫éÂùêÊ†áÊ®°Âºè‰∏ãÁöÑÂÜÖÈÉ®Áä∂ÊÄÅÂêåÊ≠•Ôºâ\n  const handleComboboxQueryChange = useCallback((query: string) => {\n    // Âú®ÂùêÊ†áÊ®°Âºè‰∏ãÔºåÊàë‰ª¨‰∏çËÆ© Combobox ÊéßÂà∂Êü•ËØ¢ÔºåËÄåÊòØÁî± Slate ÁºñËæëÂô®ÊéßÂà∂\n    // Ëøô‰∏™ÂõûË∞ÉÈÄöÂ∏∏‰∏ç‰ºöË¢´Ë∞ÉÁî®Ôºå‰ΩÜ‰∏∫‰∫ÜÂÆåÊï¥ÊÄß‰øùÁïô\n  }, [])\n\n  // Â§ÑÁêÜÁºñËæëÂô®ÂÜÖÂÆπÂèòÂåñ\n  const handleChange = useCallback((newValue: Descendant[]) => {\n    setValue(newValue)\n\n    const text = newValue.map((n) => Node.string(n)).join(\"\\n\")\n    const lastAtIndex = text.lastIndexOf(\"@\")\n\n    // Ê£ÄÊü• @ ÊòØÂê¶Â≠òÂú®ÔºåÂπ∂‰∏î @ ÂêéÈù¢Ê≤°ÊúâÁ©∫Ê†ºÊàñËÄÖÊòØÊñáÊú¨ÁöÑÊú´Â∞æ\n    if (lastAtIndex !== -1) {\n      const afterAt = text.substring(lastAtIndex + 1)\n      const hasSpaceAfterAt = afterAt.includes(\" \") || afterAt.includes(\"\\n\")\n\n      if (!hasSpaceAfterAt) {\n        // ÊèêÂèñÊü•ËØ¢Â≠óÁ¨¶‰∏≤Ôºà@ ÂêéÈù¢ÁöÑÂÜÖÂÆπÔºâ\n        setMentionQuery(afterAt)\n\n        // Ëé∑ÂèñÁºñËæëÂô®‰ΩçÁΩÆ\n        const domSelection = window.getSelection()\n        if (domSelection && domSelection.rangeCount > 0) {\n          const range = domSelection.getRangeAt(0)\n          const rect = range.getBoundingClientRect()\n          setPosition({\n            x: rect.left,\n            y: rect.bottom + 4,\n          })\n        } else if (editorRef.current) {\n          // Â§áÈÄâÊñπÊ°àÔºö‰ΩøÁî®ÁºñËæëÂô®ÂÆπÂô®‰ΩçÁΩÆ\n          const rect = editorRef.current.getBoundingClientRect()\n          setPosition({\n            x: rect.left,\n            y: rect.bottom + 4,\n          })\n        }\n        setIsOpen(true)\n      } else {\n        setIsOpen(false)\n        setMentionQuery(\"\")\n      }\n    } else {\n      setIsOpen(false)\n      setMentionQuery(\"\")\n    }\n  }, [])\n\n  // Â§ÑÁêÜÈîÆÁõò‰∫ã‰ª∂ - Âú®ËèúÂçïÊâìÂºÄÊó∂Êã¶Êà™ÂØºËà™ÈîÆ\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (!isOpen) return\n\n      // Â¶ÇÊûúËèúÂçïÊâìÂºÄÔºåÊã¶Êà™‰∏ä‰∏ãÁÆ≠Â§¥ÂíåÂõûËΩ¶ÈîÆ\n      if (\n        event.key === \"ArrowDown\" ||\n        event.key === \"ArrowUp\" ||\n        event.key === \"Enter\" ||\n        event.key === \"Escape\"\n      ) {\n        event.preventDefault()\n        event.stopPropagation()\n\n        // Ëé∑ÂèñËèúÂçïÁöÑÈîÆÁõòÂ§ÑÁêÜÂáΩÊï∞ÔºàÈÄöËøárefËÆøÈóÆÔºâ\n        const menuElement = document.querySelector('[role=\"listbox\"]') as HTMLElement\n        if (menuElement) {\n          // Áõ¥Êé•Âú®ËèúÂçïÂÖÉÁ¥†‰∏äËß¶ÂèëÈîÆÁõò‰∫ã‰ª∂\n          const keyEvent = new KeyboardEvent(\"keydown\", {\n            key: event.key,\n            code: event.code,\n            ctrlKey: event.ctrlKey,\n            shiftKey: event.shiftKey,\n            altKey: event.altKey,\n            metaKey: event.metaKey,\n            bubbles: true,\n            cancelable: true,\n          })\n          menuElement.dispatchEvent(keyEvent)\n        }\n      }\n    },\n    [isOpen],\n  )\n\n  // Â§ÑÁêÜÁî®Êà∑ÈÄâÊã©\n  const handleSelectUser = useCallback(\n    (user: (typeof allUsers)[0]) => {\n      // ‰ΩøÁî® Slate ÁöÑ API Êù•Ê≠£Á°ÆÊèíÂÖ•ÊèêÂèäÂÜÖÂÆπ\n      const { selection } = editor\n\n      if (selection) {\n        // Ëé∑ÂèñÂΩìÂâçÊñáÊú¨ÂíåÂÖâÊ†á‰ΩçÁΩÆ\n        const text = getEditorText()\n        const lastAtIndex = text.lastIndexOf(\"@\")\n\n        if (lastAtIndex !== -1) {\n          // ËÆ°ÁÆóÈúÄË¶ÅÊõøÊç¢ÁöÑËåÉÂõ¥\n          const afterAtText = text.substring(lastAtIndex + 1)\n\n          // ÂàõÂª∫ÈÄâÊã©ËåÉÂõ¥Ôºå‰ªé @ ÂºÄÂßãÂà∞ÂΩìÂâçÂÖâÊ†á‰ΩçÁΩÆ\n          const start = { path: [0, 0], offset: lastAtIndex }\n          const end = {\n            path: [0, 0],\n            offset: lastAtIndex + 1 + afterAtText.length,\n          }\n          const range = { anchor: start, focus: end }\n\n          // ÈÄâÊã©Ë¶ÅÊõøÊç¢ÁöÑÊñáÊú¨ËåÉÂõ¥\n          Transforms.select(editor, range)\n\n          // ÊèíÂÖ•ÊèêÂèäÊñáÊú¨\n          Transforms.insertText(editor, `@${user.name} `)\n        }\n      }\n\n      setIsOpen(false)\n      setMentionQuery(\"\")\n      // ‰øùÊåÅÁºñËæëÂô®ÁÑ¶ÁÇπ\n      ReactEditor.focus(editor)\n    },\n    [editor, getEditorText],\n  )\n\n  return (\n    <div className=\"w-96 space-y-4\">\n      <div className=\"rounded-xl border p-4\">\n        <h3 className=\"font-strong mb-2\">üîç Combobox Mentions with Slate.js</h3>\n        <p className=\"text-secondary-foreground text-body-small\">\n          Type @ and continue typing to filter users. Combobox maintains focus on the editor.\n        </p>\n      </div>\n\n      <Checkbox\n        value={enterFilter}\n        onChange={setEnterFilter}\n      >\n        <Checkbox.Label>Enter filter</Checkbox.Label>\n      </Checkbox>\n\n      {/* Slate ÁºñËæëÂô® */}\n      <div\n        ref={editorRef}\n        className=\"focus-within:border-selected-boundary min-h-[100px] w-full rounded-lg border p-3\"\n      >\n        <Slate\n          editor={editor}\n          initialValue={initialValue}\n          onChange={handleChange}\n        >\n          <Editable\n            placeholder=\"Type @ to mention someone, then continue typing to filter...\"\n            className=\"outline-none\"\n            style={{ minHeight: \"76px\" }}\n            onKeyDown={handleKeyDown}\n          />\n        </Slate>\n      </div>\n\n      <Combobox\n        trigger=\"coordinate\" // ÊòéÁ°ÆÊåáÂÆöÂùêÊ†áÊ®°Âºè\n        position={position}\n        value={mentionQuery}\n        onChange={handleComboboxQueryChange}\n        open={isOpen}\n        onOpenChange={setIsOpen}\n        placement=\"bottom-start\"\n        autoSelection={true} // ÂêØÁî®Ëá™Âä®ÈÄâÊã©\n      >\n        {filteredUsers.length > 0 && (\n          <Combobox.Content>\n            <Combobox.Label>\n              {enterFilter ? (mentionQuery ? `Search ${mentionQuery}` : \"Users\") : \"Users\"}\n              {` (${filteredUsers.length})`}\n            </Combobox.Label>\n\n            {filteredUsers.map((user) => (\n              <Combobox.Item\n                key={user.id}\n                onClick={() => handleSelectUser(user)}\n                prefixElement={\n                  <img\n                    src={user.avatar}\n                    alt={user.name}\n                    className=\"size-4 rounded-full\"\n                  />\n                }\n                suffixElement={<span className=\"text-body-small text-white/60\">{user.role}</span>}\n              >\n                <Combobox.Value>{user.name}</Combobox.Value>\n              </Combobox.Item>\n            ))}\n          </Combobox.Content>\n        )}\n      </Combobox>\n\n      {/* Ë∞ÉËØï‰ø°ÊÅØ */}\n      <div className=\"space-y-2\">\n        <div className=\"bg-secondary-background text-secondary-foreground rounded-xl p-4\">\n          <div>\n            <strong>Current text:</strong> &ldquo;{getEditorText()}&rdquo;\n          </div>\n          <div>\n            <strong>Mention query:</strong> &ldquo;{mentionQuery}&rdquo;\n          </div>\n          <div>\n            <strong>Filtered users:</strong> {filteredUsers.length} / {allUsers.length}\n          </div>\n          <div>\n            <strong>Menu open:</strong> {isOpen ? \"Yes\" : \"No\"}\n          </div>\n          <div>\n            <strong>Position:</strong> {position ? `x:${position.x}, y:${position.y}` : \"null\"}\n          </div>\n          <div>\n            <strong>Should show menu:</strong> {isOpen ? \"Yes\" : \"No\"}\n          </div>\n        </div>\n\n        <div className=\"rounded-xl border p-4\">\n          <h4 className=\"font-strong mb-2\">Test Cases:</h4>\n          <ul className=\"text-secondary-foreground space-y-1\">\n            <li>‚Ä¢ Type @ - Shows all 5 users</li>\n            <li>‚Ä¢ Type @john - Filters to John Doe, Alice Johnson</li>\n            <li>‚Ä¢ Type @dev - Filters to developers</li>\n            <li>‚Ä¢ Type @engineer - Filters to engineers</li>\n            <li>‚Ä¢ Type @xyz - Shows &ldquo;No users found&rdquo;</li>\n            <li>‚Ä¢ Add space after selection - Closes menu</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "collections-combobox--empty",
      "name": "Empty",
      "exportName": "Empty",
      "description": "Empty: Demonstrates empty state display when no results match.\n\nFeatures:\n- Show custom empty message when no options match the search\n- Useful for filtered results scenarios",
      "source": "import { Combobox } from \"@choice-ui/combobox\"\nimport { useState, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [value, setValue] = useState(\"\")\n\n  const allOptions = [\n    { value: \"apple\", label: \"Apple\" },\n    { value: \"banana\", label: \"Banana\" },\n    { value: \"orange\", label: \"Orange\" },\n  ]\n\n  const filteredOptions = useMemo(() => {\n    if (!value.trim()) return allOptions\n    return allOptions.filter((opt) => opt.label.toLowerCase().includes(value.toLowerCase()))\n  }, [value])\n\n  return (\n    <Combobox\n      value={value}\n      onChange={setValue}\n    >\n      <Combobox.Trigger placeholder=\"Search fruits...\" />\n      <Combobox.Content>\n        {filteredOptions.length > 0 ? (\n          filteredOptions.map((option) => (\n            <Combobox.Item\n              key={option.value}\n              value={option.value}\n              onClick={() => setValue(option.label)}\n            >\n              <Combobox.Value>{option.label}</Combobox.Value>\n            </Combobox.Item>\n          ))\n        ) : (\n          <Combobox.Empty>No results found</Combobox.Empty>\n        )}\n      </Combobox.Content>\n    </Combobox>\n  )\n\n}"
    }
  ],
  "tags": [
    "beta"
  ]
}