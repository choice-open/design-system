{
  "slug": "collections/combobox",
  "title": "Combobox",
  "package": {
    "name": "@choice-ui/combobox",
    "version": "0.0.4",
    "description": "Combobox component for Choiceform Design System",
    "dependencies": {
      "@choice-ui/shared": "workspace:*",
      "@choice-ui/icon-button": "workspace:*",
      "@choiceform/icons-react": "^1.3.8",
      "@choice-ui/menus": "workspace:*",
      "@floating-ui/react": "0.27.15",
      "usehooks-ts": "^3.1.0"
    },
    "peerDependencies": {
      "react": ">=18.0.0",
      "react-dom": ">=18.0.0"
    }
  },
  "exports": [
    "Combobox"
  ],
  "props": [
    {
      "displayName": "Combobox",
      "description": "",
      "props": [
        {
          "name": "autoSelection",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "disabled",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "focusManagerProps",
          "type": "FloatingFocusManagerProps | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "matchTriggerWidth",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onBlur",
          "type": "((value: string) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onChange",
          "type": "((value: string) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onOpenChange",
          "type": "((open: boolean, trigger?: \"input\" | \"click\" | \"focus\" | undefined) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "open",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "placement",
          "type": "enum",
          "required": false,
          "description": ""
        },
        {
          "name": "portalId",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "position",
          "type": "{ x: number; y: number; } | null | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "readOnly",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "root",
          "type": "HTMLElement | null | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "trigger",
          "type": "enum",
          "required": false,
          "description": ""
        },
        {
          "name": "value",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "variant",
          "type": "enum",
          "required": false,
          "description": ""
        }
      ]
    }
  ],
  "stories": [
    {
      "id": "collections-combobox--basic",
      "name": "Basic",
      "exportName": "Basic",
      "description": "Basic: Simple combobox with searchable fruit options.\n- Type to filter the list\n- Use arrow keys to navigate\n- Press Enter or click to select\n- Selected value appears in the input",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"w-64\">\n      <Combobox\n        value={value}\n        onChange={handleChange}\n        onOpenChange={handleOpenChange}\n      >\n        <Combobox.Trigger placeholder=\"Search fruits...\" />\n        {itemsToShow.length > 0 && (\n          <Combobox.Content>\n            <>\n              <Combobox.Label>Fruits</Combobox.Label>\n              {itemsToShow.map((fruit) => (\n                <Combobox.Item key={fruit} onClick={() => setValue(fruit)}>\n                  <Combobox.Value>{fruit}</Combobox.Value>\n                </Combobox.Item>\n              ))}\n            </>\n          </Combobox.Content>\n        )}\n      </Combobox>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--clearable",
      "name": "Clearable",
      "exportName": "Clearable",
      "description": "Clearable: Combobox with clearable input.\n- Shows clear button when value is not empty\n- Clear button is hidden when value is empty",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"w-64\">\n      <Combobox value={value} onChange={setValue}>\n        <Combobox.Trigger showClear placeholder=\"Search fruits...\" />\n        {filteredFruits.length > 0 && (\n          <Combobox.Content>\n            <>\n              <Combobox.Label>Fruits</Combobox.Label>\n              {filteredFruits.map((fruit) => (\n                <Combobox.Item key={fruit} onClick={() => setValue(fruit)}>\n                  <Combobox.Value>{fruit}</Combobox.Value>\n                </Combobox.Item>\n              ))}\n            </>\n          </Combobox.Content>\n        )}\n      </Combobox>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--controlled",
      "name": "Controlled",
      "exportName": "Controlled",
      "description": "Controlled: Controlled combobox with external state management.\n- Value is controlled by parent component\n- Demonstrates integration with forms",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"w-64\">\n        <Combobox value={searchValue} onChange={setSearchValue}>\n          <Combobox.Trigger placeholder=\"Search fruits...\" />\n          <Combobox.Content>\n            {filteredFruits.length > 0 ? (\n              <>\n                <Combobox.Label>Available Fruits</Combobox.Label>\n                {filteredFruits.map((fruit) => (\n                  <Combobox.Item\n                    key={fruit}\n                    onClick={() => {\n                      setSelectedFruit(fruit);\n                      setSearchValue(fruit);\n                    }}\n                  >\n                    <Combobox.Value>{fruit}</Combobox.Value>\n                  </Combobox.Item>\n                ))}\n              </>\n            ) : (\n              <div className=\"p-4 text-center text-white/50\">\n                No matches found\n              </div>\n            )}\n          </Combobox.Content>\n        </Combobox>\n      </div>\n\n      <div className=\"text-secondary-foreground\">\n        <div>\n          Selected fruit: <strong>{selectedFruit}</strong>\n        </div>\n        <div>\n          Search value: <strong>{searchValue || \"(empty)\"}</strong>\n        </div>\n      </div>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--empty",
      "name": "Empty",
      "exportName": "Empty",
      "description": "Empty: Combobox with no initial value.\n- Shows placeholder text\n- All options visible when opened",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"w-64\">\n      <Combobox value={value} onChange={setValue}>\n        <Combobox.Trigger placeholder=\"Choose a fruit...\" />\n        <Combobox.Content>\n          <Combobox.Label>Popular Fruits</Combobox.Label>\n          {filteredFruits.map((fruit) => (\n            <Combobox.Item key={fruit} onClick={() => setValue(fruit)}>\n              <Combobox.Value>{fruit}</Combobox.Value>\n            </Combobox.Item>\n          ))}\n        </Combobox.Content>\n      </Combobox>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--large",
      "name": "Large",
      "exportName": "Large",
      "description": "Large: Large size variant of the combobox.\n- Increased padding and font size\n- Better for touch interfaces",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"w-80\">\n      <Combobox value={value} onChange={setValue}>\n        <Combobox.Trigger placeholder=\"Search fruits...\" size=\"large\" />\n        <Combobox.Content>\n          <Combobox.Label>Fruits</Combobox.Label>\n          {filteredFruits.map((fruit) => (\n            <Combobox.Item\n              key={fruit}\n              size=\"large\"\n              onClick={() => setValue(fruit)}\n            >\n              <Combobox.Value>{fruit}</Combobox.Value>\n            </Combobox.Item>\n          ))}\n        </Combobox.Content>\n      </Combobox>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--disabled",
      "name": "Disabled",
      "exportName": "Disabled",
      "description": "Disabled: Disabled combobox state.\n- Input and interactions are disabled\n- Visual feedback for unavailable state",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"w-64\">\n      <Combobox disabled>\n        <Combobox.Trigger placeholder=\"Disabled combobox...\" value=\"Apple\" />\n        <Combobox.Content>\n          <Combobox.Item>\n            <Combobox.Value>Apple</Combobox.Value>\n          </Combobox.Item>\n        </Combobox.Content>\n      </Combobox>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--long-list",
      "name": "Long List",
      "exportName": "LongList",
      "description": "",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"w-64\">\n      <Combobox value={value} onChange={setValue}>\n        <Combobox.Trigger placeholder=\"Search countries...\" />\n        <Combobox.Content>\n          <Combobox.Label>\n            Countries ({filteredCountries.length} {!value ? \"shown\" : \"found\"}\n            )\n          </Combobox.Label>\n          {filteredCountries.map((country, index) => (\n            <Combobox.Item\n              key={`${country}-${index}`}\n              onClick={() => setValue(country)}\n            >\n              <Combobox.Value>{country}</Combobox.Value>\n            </Combobox.Item>\n          ))}\n          {filteredCountries.length === 0 && value && (\n            <div className=\"p-4 text-center text-white/50\">\n              No countries found for &ldquo;{value}&rdquo;\n            </div>\n          )}\n        </Combobox.Content>\n      </Combobox>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--custom-width",
      "name": "Custom Width",
      "exportName": "CustomWidth",
      "description": "",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"w-48\">\n      <Combobox value={value} onChange={setValue} matchTriggerWidth={false}>\n        <Combobox.Trigger placeholder=\"Fruit...\" />\n        <Combobox.Content className=\"w-80\">\n          <Combobox.Label>Available Fruits (Custom Width)</Combobox.Label>\n          {filteredFruits.map((fruit) => (\n            <Combobox.Item key={fruit} onClick={() => setValue(fruit)}>\n              <Combobox.Value>{fruit}</Combobox.Value>\n            </Combobox.Item>\n          ))}\n        </Combobox.Content>\n      </Combobox>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--coordinate-mode",
      "name": "Coordinate Mode",
      "exportName": "CoordinateMode",
      "description": "",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"w-80 space-y-4\">\n      <div className=\"rounded-xl border p-4\">\n        <h3 className=\"font-strong mb-2\">üìç Coordinate Mode Combobox</h3>\n        <p className=\"text-secondary-foreground text-body-small\">\n          Click anywhere in the area below to trigger a Combobox at that\n          position. Perfect for mentions, autocomplete, etc.\n        </p>\n      </div>\n\n      <div\n        className=\"bg-secondary-background relative h-64 cursor-pointer rounded-lg border border-dashed p-4\"\n        onMouseDown={handleClick}\n      >\n        <p className=\"text-secondary-foreground text-center\">\n          Click anywhere in this area to show Combobox at mouse position\n        </p>\n\n        {position && (\n          <div\n            className=\"text-secondary-foreground fixed z-10 size-4\"\n            style={{ left: position.x - 8, top: position.y - 8 }}\n          >\n            üìç\n          </div>\n        )}\n      </div>\n\n      {/* Combobox in coordinate mode */}\n      <Combobox\n        trigger=\"coordinate\"\n        position={position}\n        value={query}\n        onChange={setQuery}\n        open={isOpen}\n        onOpenChange={setIsOpen}\n        placement=\"bottom-start\"\n        autoSelection={true}\n      >\n        <Combobox.Content>\n          <Combobox.Label>\n            {query ? `Search results for \"${query}\"` : \"Select User\"}\n          </Combobox.Label>\n          {filteredUsers.length > 0 ? (\n            filteredUsers.map((user) => (\n              <Combobox.Item\n                key={user.id}\n                onClick={() => handleSelectUser(user)}\n              >\n                <img\n                  src={user.avatar}\n                  alt={user.name}\n                  className=\"mr-2 size-4 rounded-full\"\n                />\n                <Combobox.Value>{user.name}</Combobox.Value>\n              </Combobox.Item>\n            ))\n          ) : (\n            <div className=\"p-4 text-center text-white/50\">\n              No users found for &ldquo;{query}&rdquo;\n            </div>\n          )}\n        </Combobox.Content>\n      </Combobox>\n\n      {/* Debug info */}\n      <div className=\"bg-secondary-background text-secondary-foreground rounded-lg p-3 text-xs\">\n        <div>\n          <strong>Query:</strong> &ldquo;{query}&rdquo;\n        </div>\n        <div>\n          <strong>Position:</strong>{\" \"}\n          {position ? `${position.x}, ${position.y}` : \"null\"}\n        </div>\n        <div>\n          <strong>Open:</strong> {isOpen ? \"Yes\" : \"No\"}\n        </div>\n        <div>\n          <strong>Results:</strong> {filteredUsers.length}\n        </div>\n      </div>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--mentions-with-slate",
      "name": "Mentions With Slate",
      "exportName": "MentionsWithSlate",
      "description": "",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"w-96 space-y-4\">\n      <div className=\"rounded-xl border p-4\">\n        <h3 className=\"font-strong mb-2\">\n          üîç Combobox Mentions with Slate.js\n        </h3>\n        <p className=\"text-secondary-foreground text-body-small\">\n          Type @ and continue typing to filter users. Combobox maintains focus\n          on the editor.\n        </p>\n      </div>\n\n      <Checkbox value={enterFilter} onChange={setEnterFilter}>\n        <Checkbox.Label>Enter filter</Checkbox.Label>\n      </Checkbox>\n\n      {/* Slate ÁºñËæëÂô® */}\n      <div\n        ref={editorRef}\n        className=\"focus-within:border-selected-boundary min-h-[100px] w-full rounded-lg border p-3\"\n      >\n        <Slate\n          editor={editor}\n          initialValue={initialValue}\n          onChange={handleChange}\n        >\n          <Editable\n            placeholder=\"Type @ to mention someone, then continue typing to filter...\"\n            className=\"outline-none\"\n            style={{ minHeight: \"76px\" }}\n            onKeyDown={handleKeyDown}\n          />\n        </Slate>\n      </div>\n\n      <Combobox\n        trigger=\"coordinate\" // ÊòéÁ°ÆÊåáÂÆöÂùêÊ†áÊ®°Âºè\n        position={position}\n        value={mentionQuery}\n        onChange={handleComboboxQueryChange}\n        open={isOpen}\n        onOpenChange={setIsOpen}\n        placement=\"bottom-start\"\n        autoSelection={true} // ÂêØÁî®Ëá™Âä®ÈÄâÊã©\n      >\n        {filteredUsers.length > 0 && (\n          <Combobox.Content>\n            <Combobox.Label>\n              {enterFilter\n                ? mentionQuery\n                  ? `Search ${mentionQuery}`\n                  : \"Users\"\n                : \"Users\"}\n              {` (${filteredUsers.length})`}\n            </Combobox.Label>\n\n            {filteredUsers.map((user) => (\n              <Combobox.Item\n                key={user.id}\n                onClick={() => handleSelectUser(user)}\n                prefixElement={\n                  <img\n                    src={user.avatar}\n                    alt={user.name}\n                    className=\"size-4 rounded-full\"\n                  />\n                }\n                suffixElement={\n                  <span className=\"text-body-small text-white/60\">\n                    {user.role}\n                  </span>\n                }\n              >\n                <Combobox.Value>{user.name}</Combobox.Value>\n              </Combobox.Item>\n            ))}\n          </Combobox.Content>\n        )}\n      </Combobox>\n\n      {/* Ë∞ÉËØï‰ø°ÊÅØ */}\n      <div className=\"space-y-2\">\n        <div className=\"bg-secondary-background text-secondary-foreground rounded-xl p-4\">\n          <div>\n            <strong>Current text:</strong> &ldquo;{getEditorText()}&rdquo;\n          </div>\n          <div>\n            <strong>Mention query:</strong> &ldquo;{mentionQuery}&rdquo;\n          </div>\n          <div>\n            <strong>Filtered users:</strong> {filteredUsers.length} /{\" \"}\n            {allUsers.length}\n          </div>\n          <div>\n            <strong>Menu open:</strong> {isOpen ? \"Yes\" : \"No\"}\n          </div>\n          <div>\n            <strong>Position:</strong>{\" \"}\n            {position ? `x:${position.x}, y:${position.y}` : \"null\"}\n          </div>\n          <div>\n            <strong>Should show menu:</strong> {isOpen ? \"Yes\" : \"No\"}\n          </div>\n        </div>\n\n        <div className=\"rounded-xl border p-4\">\n          <h4 className=\"font-strong mb-2\">Test Cases:</h4>\n          <ul className=\"text-secondary-foreground space-y-1\">\n            <li>‚Ä¢ Type @ - Shows all 5 users</li>\n            <li>‚Ä¢ Type @john - Filters to John Doe, Alice Johnson</li>\n            <li>‚Ä¢ Type @dev - Filters to developers</li>\n            <li>‚Ä¢ Type @engineer - Filters to engineers</li>\n            <li>‚Ä¢ Type @xyz - Shows &ldquo;No users found&rdquo;</li>\n            <li>‚Ä¢ Add space after selection - Closes menu</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--readonly",
      "name": "Readonly",
      "exportName": "Readonly",
      "description": "Combobox component in readOnly state.\n\nIn readOnly mode:\n- The input field is read-only and cannot be edited\n- Clicking on menu items will not change the value\n- The menu can still be opened and closed normally\n- Useful for displaying a value without allowing changes",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <div className=\"rounded-xl border bg-stone-50 p-4\">\n        <div className=\"text-body-small-strong mb-2 text-stone-700\">\n          Current Value:\n        </div>\n        <div className=\"text-body-small font-mono text-stone-600\">\n          {value}\n        </div>\n        <div className=\"text-body-small-strong mt-2 text-stone-700\">\n          Change Count:\n        </div>\n        <div className=\"text-body-small font-mono text-stone-600\">\n          {changeCount}\n        </div>\n      </div>\n\n      <Combobox readOnly value={value} onChange={handleChange}>\n        <Combobox.Trigger placeholder=\"Select a fruit...\" />\n        <Combobox.Content>\n          {options.map((option) => (\n            <Combobox.Item key={option.value} value={option.value}>\n              <Combobox.Value>{option.label}</Combobox.Value>\n            </Combobox.Item>\n          ))}\n        </Combobox.Content>\n      </Combobox>\n\n      <div className=\"text-body-small text-stone-600\">\n        üí° Try typing in the input, clicking on menu items, or using the clear\n        button - the value should not change and the change count should\n        remain at 0. The input field is read-only.\n      </div>\n    </div>\n  );\n}"
    },
    {
      "id": "collections-combobox--light",
      "name": "Light",
      "exportName": "Light",
      "description": "Combobox component in light variant.",
      "source": "import { Component } from \"@choice-ui/combobox\"\n\nexport default function App() {\n  return (\n    <Combobox variant=\"light\" value={value} onChange={setValue}>\n      <Combobox.Trigger placeholder=\"Select a fruit...\" />\n      <Combobox.Content>\n        {options.map((option) => (\n          <Combobox.Item key={option.value} value={option.value}>\n            <Combobox.Value>{option.label}</Combobox.Value>\n          </Combobox.Item>\n        ))}\n      </Combobox.Content>\n    </Combobox>\n  );\n}"
    }
  ]
}